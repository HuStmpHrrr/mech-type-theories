<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>Cumulative.Semantics.PER</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Symbol" id="1">{-#</a> <a class="Keyword" id="5">OPTIONS</a> <a class="Pragma" id="13">--without-K</a> <a class="Pragma" id="25">--safe</a> <a class="Symbol" id="32">#-}</a>

<a class="Comment" id="37">-- Definition of the PER model</a>
<a class="Comment" id="68">--</a>
<a class="Comment" id="71">-- The PER model relates two domain values such that the syntactic terms they</a>
<a class="Comment" id="149">-- represent are equivalent. Since we are handling Cumulative with full a ω universe, we must</a>
<a class="Comment" id="243">-- use a feature, induction-recursion, to strengthen the logical power of the</a>
<a class="Comment" id="321">-- meta-language.</a>
<a class="Keyword" id="339">module</a> <a class="Module" href="Cumulative.Semantics.PER.html" id="346">Cumulative.Semantics.PER</a> <a class="Keyword" id="371">where</a>

<a class="Keyword" id="378">open</a> <a class="Keyword" id="383">import</a> <a class="Module" href="Data.Nat.Properties.html" id="390">Data.Nat.Properties</a>

<a class="Keyword" id="411">open</a> <a class="Keyword" id="416">import</a> <a class="Module" href="Lib.html" id="423">Lib</a> <a class="Keyword" id="427">hiding</a> <a class="Symbol" id="434">(</a><a class="Function" href="Lib.html#7288" id="435">lookup</a><a class="Symbol" id="441">)</a>
<a class="Keyword" id="443">open</a> <a class="Keyword" id="448">import</a> <a class="Module" href="Cumulative.Semantics.Domain.html" id="455">Cumulative.Semantics.Domain</a>
<a class="Keyword" id="483">open</a> <a class="Keyword" id="488">import</a> <a class="Module" href="Cumulative.Semantics.Evaluation.html" id="495">Cumulative.Semantics.Evaluation</a>
<a class="Keyword" id="527">open</a> <a class="Keyword" id="532">import</a> <a class="Module" href="Cumulative.Semantics.Readback.html" id="539">Cumulative.Semantics.Readback</a>
<a class="Keyword" id="569">open</a> <a class="Keyword" id="574">import</a> <a class="Module" href="Relation.Binary.html" id="581">Relation.Binary</a> <a class="Keyword" id="597">using</a> <a class="Symbol" id="603">(</a><a class="Function" href="Relation.Binary.Core.html#896" id="604">Rel</a><a class="Symbol" id="607">)</a>

<a id="Ty"></a><a class="Function" href="Cumulative.Semantics.PER.html#610" id="610">Ty</a> <a class="Symbol" id="613">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="615">Set₁</a>
<a class="Function" href="Cumulative.Semantics.PER.html#610" id="620">Ty</a> <a class="Symbol" id="623">=</a> <a class="Function" href="Relation.Binary.Core.html#896" id="625">Rel</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="629">D</a> <a class="Symbol" id="631">_</a>

<a id="Ev"></a><a class="Function" href="Cumulative.Semantics.PER.html#634" id="634">Ev</a> <a class="Symbol" id="637">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="639">Set₁</a>
<a class="Function" href="Cumulative.Semantics.PER.html#634" id="644">Ev</a> <a class="Symbol" id="647">=</a> <a class="Function" href="Relation.Binary.Core.html#896" id="649">Rel</a> <a class="Function" href="Cumulative.Semantics.Domain.html#775" id="653">Env</a> <a class="Symbol" id="657">_</a>

<a class="Comment" id="660">-- Two neutral domain values are related if they are read back equal</a>
<a id="Bot"></a><a class="Function" href="Cumulative.Semantics.PER.html#729" id="729">Bot</a> <a class="Symbol" id="733">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1344" id="735">Dn</a> <a class="Symbol" id="738">→</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1344" id="740">Dn</a> <a class="Symbol" id="743">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="745">Set</a>
<a class="Function" href="Cumulative.Semantics.PER.html#729" id="749">Bot</a> <a class="Bound" href="Cumulative.Semantics.PER.html#753" id="753">c</a> <a class="Bound" href="Cumulative.Semantics.PER.html#755" id="755">c′</a> <a class="Symbol" id="758">=</a> <a class="Symbol" id="760">∀</a> <a class="Bound" href="Cumulative.Semantics.PER.html#762" id="762">n</a> <a class="Symbol" id="764">→</a> <a class="Function" href="Data.Product.Base.html#852" id="766">∃</a> <a class="Symbol" id="768">λ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#770" id="770">u</a> <a class="Symbol" id="772">→</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1832" id="774">Re</a> <a class="Bound" href="Cumulative.Semantics.PER.html#762" id="777">n</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1832" id="779">-</a> <a class="Bound" href="Cumulative.Semantics.PER.html#753" id="781">c</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1832" id="783">↘</a> <a class="Bound" href="Cumulative.Semantics.PER.html#770" id="785">u</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="787">×</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1832" id="789">Re</a> <a class="Bound" href="Cumulative.Semantics.PER.html#762" id="792">n</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1832" id="794">-</a> <a class="Bound" href="Cumulative.Semantics.PER.html#755" id="796">c′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1832" id="799">↘</a> <a class="Bound" href="Cumulative.Semantics.PER.html#770" id="801">u</a>

<a class="Comment" id="804">-- Two normal domain values are related if they are read back equal</a>
<a id="Top"></a><a class="Function" href="Cumulative.Semantics.PER.html#872" id="872">Top</a> <a class="Symbol" id="876">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1932" id="878">Df</a> <a class="Symbol" id="881">→</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1932" id="883">Df</a> <a class="Symbol" id="886">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="888">Set</a>
<a class="Function" href="Cumulative.Semantics.PER.html#872" id="892">Top</a> <a class="Bound" href="Cumulative.Semantics.PER.html#896" id="896">d</a> <a class="Bound" href="Cumulative.Semantics.PER.html#898" id="898">d′</a> <a class="Symbol" id="901">=</a> <a class="Symbol" id="903">∀</a> <a class="Bound" href="Cumulative.Semantics.PER.html#905" id="905">n</a> <a class="Symbol" id="907">→</a> <a class="Function" href="Data.Product.Base.html#852" id="909">∃</a> <a class="Symbol" id="911">λ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#913" id="913">w</a> <a class="Symbol" id="915">→</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1084" id="917">Rf</a> <a class="Bound" href="Cumulative.Semantics.PER.html#905" id="920">n</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1084" id="922">-</a> <a class="Bound" href="Cumulative.Semantics.PER.html#896" id="924">d</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1084" id="926">↘</a> <a class="Bound" href="Cumulative.Semantics.PER.html#913" id="928">w</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="930">×</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1084" id="932">Rf</a> <a class="Bound" href="Cumulative.Semantics.PER.html#905" id="935">n</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1084" id="937">-</a> <a class="Bound" href="Cumulative.Semantics.PER.html#898" id="939">d′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#1084" id="942">↘</a> <a class="Bound" href="Cumulative.Semantics.PER.html#913" id="944">w</a>

<a class="Comment" id="947">-- Two domain values intended to represent types are related if they are read back equal</a>
<a id="TopT"></a><a class="Function" href="Cumulative.Semantics.PER.html#1036" id="1036">TopT</a> <a class="Symbol" id="1041">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="1043">D</a> <a class="Symbol" id="1045">→</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="1047">D</a> <a class="Symbol" id="1049">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="1051">Set</a>
<a class="Function" href="Cumulative.Semantics.PER.html#1036" id="1055">TopT</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1060" id="1060">A</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1062" id="1062">B</a> <a class="Symbol" id="1064">=</a> <a class="Symbol" id="1066">∀</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1068" id="1068">n</a> <a class="Symbol" id="1070">→</a> <a class="Function" href="Data.Product.Base.html#852" id="1072">∃</a> <a class="Symbol" id="1074">λ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1076" id="1076">W</a> <a class="Symbol" id="1078">→</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#2564" id="1080">Rty</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1068" id="1084">n</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#2564" id="1086">-</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1060" id="1088">A</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#2564" id="1090">↘</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1076" id="1092">W</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="1094">×</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#2564" id="1096">Rty</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1068" id="1100">n</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#2564" id="1102">-</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1062" id="1104">B</a> <a class="Datatype Operator" href="Cumulative.Semantics.Readback.html#2564" id="1106">↘</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1076" id="1108">W</a>

<a class="Comment" id="1111">-- A PER to model natural number values</a>
<a class="Keyword" id="1151">data</a> <a id="Nat"></a><a class="Datatype" href="Cumulative.Semantics.PER.html#1156" id="1156">Nat</a> <a class="Symbol" id="1160">:</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="1162">Ty</a> <a class="Keyword" id="1165">where</a>
  <a id="Nat.ze"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#1173" id="1173">ze</a> <a class="Symbol" id="1176">:</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1222" id="1178">ze</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1181">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1222" id="1183">ze</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1186">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#1156" id="1188">Nat</a>
  <a id="Nat.su"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#1194" id="1194">su</a> <a class="Symbol" id="1197">:</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2076" id="1199">a</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1201">≈</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2093" id="1203">b</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1205">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#1156" id="1207">Nat</a> <a class="Symbol" id="1211">→</a>
       <a class="Comment" id="1220">-----------------</a>
       <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1234" id="1245">su</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2076" id="1248">a</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1250">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1234" id="1252">su</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2093" id="1255">b</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1257">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#1156" id="1259">Nat</a>
  <a id="Nat.ne"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#1265" id="1265">ne</a> <a class="Symbol" id="1268">:</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2161" id="1270">c</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1272">≈</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2163" id="1274">c′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1277">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#729" id="1279">Bot</a> <a class="Symbol" id="1283">→</a>
       <a class="Comment" id="1292">--------------------</a>
       <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1286" id="1320">↑</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2110" id="1322">A</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2161" id="1324">c</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1326">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1286" id="1328">↑</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2112" id="1330">A′</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2163" id="1333">c′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1336">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#1156" id="1338">Nat</a>

<a class="Comment" id="1343">-- Neutral type values are related simply when the neutral values themselves are related by Bot</a>
<a class="Keyword" id="1439">data</a> <a id="Neu"></a><a class="Datatype" href="Cumulative.Semantics.PER.html#1444" id="1444">Neu</a> <a class="Symbol" id="1448">:</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="1450">Ty</a> <a class="Keyword" id="1453">where</a>
  <a id="Neu.ne"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#1461" id="1461">ne</a> <a class="Symbol" id="1464">:</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2161" id="1466">c</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1468">≈</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2163" id="1470">c′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1473">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#729" id="1475">Bot</a> <a class="Symbol" id="1479">→</a>
       <a class="Comment" id="1488">---------------------</a>
       <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1286" id="1517">↑</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2110" id="1519">A</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2161" id="1521">c</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1523">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1286" id="1525">↑</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2112" id="1527">A′</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2163" id="1530">c′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="1533">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#1444" id="1535">Neu</a>

<a class="Keyword" id="1540">pattern</a> <a id="ne′"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#1548" id="1548">ne′</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1579" id="1552">c≈c′</a> <a class="Symbol" id="1557">=</a> <a class="InductiveConstructor" id="1559">ne</a> <a class="Symbol" id="1562">{</a><a class="Argument" id="1563">A</a> <a class="Symbol" id="1565">=</a> <a class="InductiveConstructor" id="1567">N</a><a class="Symbol" id="1568">}</a> <a class="Symbol" id="1570">{</a><a class="Argument" id="1571">A′</a> <a class="Symbol" id="1574">=</a> <a class="InductiveConstructor" id="1576">N</a><a class="Symbol" id="1577">}</a> <a class="Bound" href="Cumulative.Semantics.PER.html#1579" id="1579">c≈c′</a>

<a class="Comment" id="1585">-- Now we move on to defining the PER model. To model the universes, we use</a>
<a class="Comment" id="1661">-- Tarski-style encoding, i.e. for a universe level i, 𝕌 i is a PER relating two</a>
<a class="Comment" id="1742">-- domain values (or "codes") that are types (i.e. elements of the i'th level</a>
<a class="Comment" id="1820">-- universe). If A ≈ B ∈ 𝕌 i, then El i A relates two values that are elements of the</a>
<a class="Comment" id="1906">-- set encoded by A.</a>
<a class="Comment" id="1927">--</a>
<a class="Comment" id="1930">-- Unfortunately, this method only works on paper. In type theory, we must consider</a>
<a class="Comment" id="2014">-- the effect of proof relevance, when defining El, we must take a witness</a>
<a class="Comment" id="2089">-- A≈B : A ≈ B ∈ 𝕌 i instead of just A, and El is defined by recursion on A≈B, while 𝕌</a>
<a class="Comment" id="2176">-- itself is defined inductively, hence a induction-recursion definition.</a>
<a class="Comment" id="2250">--</a>
<a class="Comment" id="2253">-- Finally, we need a well-founded definition in order to handle cumulative</a>
<a class="Comment" id="2329">-- universe. In a non-cumulative setting, we expect that this extra well-founded layer</a>
<a class="Comment" id="2416">-- by the universe level can be taken away, because we can only grow the universe</a>
<a class="Comment" id="2498">-- level by one each time.</a>


<a class="Comment" id="2527">-- Helper definitions for the PER model</a>

<a class="Comment" id="2568">-- The record for relating return types of Π's</a>
<a class="Comment" id="2615">--</a>
<a class="Comment" id="2618">-- Here R is always 𝕌 i, so on paper, it represents ⟦T⟧(ρ) ≈ ⟦T′⟧(ρ′) ∈ 𝕌 i.</a>
<a class="Keyword" id="2695">record</a> <a id="ΠRT"></a><a class="Record" href="Cumulative.Semantics.PER.html#2702" id="2702">ΠRT</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2706" id="2706">T</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2708" id="2708">ρ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2710" id="2710">T′</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2713" id="2713">ρ′</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2716" id="2716">R</a> <a class="Symbol" id="2718">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="2720">Set</a> <a class="Keyword" id="2724">where</a>
  <a class="Keyword" id="2732">field</a>
    <a id="ΠRT.⟦T⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#2742" id="2742">⟦T⟧</a>   <a class="Symbol" id="2748">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="2750">D</a>
    <a id="ΠRT.⟦T′⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#2756" id="2756">⟦T′⟧</a>  <a class="Symbol" id="2762">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="2764">D</a>
    <a id="ΠRT.↘⟦T⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#2770" id="2770">↘⟦T⟧</a>  <a class="Symbol" id="2776">:</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="2778">⟦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2706" id="2780">T</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="2782">⟧</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2708" id="2784">ρ</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="2786">↘</a> <a class="Field" href="Cumulative.Semantics.PER.html#2742" id="2788">⟦T⟧</a>
    <a id="ΠRT.↘⟦T′⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#2796" id="2796">↘⟦T′⟧</a> <a class="Symbol" id="2802">:</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="2804">⟦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2710" id="2806">T′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="2809">⟧</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2713" id="2811">ρ′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="2814">↘</a> <a class="Field" href="Cumulative.Semantics.PER.html#2756" id="2816">⟦T′⟧</a>
    <a id="ΠRT.T≈T′"></a><a class="Field" href="Cumulative.Semantics.PER.html#2825" id="2825">T≈T′</a>  <a class="Symbol" id="2831">:</a> <a class="Field" href="Cumulative.Semantics.PER.html#2742" id="2833">⟦T⟧</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="2837">≈</a> <a class="Field" href="Cumulative.Semantics.PER.html#2756" id="2839">⟦T′⟧</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="2844">∈</a> <a class="Bound" href="Cumulative.Semantics.PER.html#2716" id="2846">R</a>


<a class="Comment" id="2850">-- The record for relating values of type Π A T ρ</a>
<a class="Comment" id="2900">--</a>
<a class="Comment" id="2903">-- Here R is always El i ⟦T⟧(ρ ↦ a), so on paper, it represents f a ≈ f′ a′ ∈ El i ⟦T⟧(ρ ↦ a).</a>
<a class="Keyword" id="2998">record</a> <a id="Π̂"></a><a class="Record" href="Cumulative.Semantics.PER.html#3005" id="3005">Π̂</a> <a class="Symbol" id="3008">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3009" id="3009">f</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3011" id="3011">a</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3013" id="3013">f′</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3016" id="3016">a′</a> <a class="Symbol" id="3019">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="3021">D</a><a class="Symbol" id="3022">)</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3024" id="3024">R</a> <a class="Symbol" id="3026">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="3028">Set</a> <a class="Keyword" id="3032">where</a>
  <a class="Keyword" id="3040">field</a>
    <a id="Π̂.fa"></a><a class="Field" href="Cumulative.Semantics.PER.html#3050" id="3050">fa</a>     <a class="Symbol" id="3057">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="3059">D</a>
    <a id="Π̂.fa′"></a><a class="Field" href="Cumulative.Semantics.PER.html#3065" id="3065">fa′</a>    <a class="Symbol" id="3072">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="3074">D</a>
    <a id="Π̂.↘fa"></a><a class="Field" href="Cumulative.Semantics.PER.html#3080" id="3080">↘fa</a>    <a class="Symbol" id="3087">:</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3009" id="3089">f</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#509" id="3091">∙</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3011" id="3093">a</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#509" id="3095">↘</a> <a class="Field" href="Cumulative.Semantics.PER.html#3050" id="3097">fa</a>
    <a id="Π̂.↘fa′"></a><a class="Field" href="Cumulative.Semantics.PER.html#3104" id="3104">↘fa′</a>   <a class="Symbol" id="3111">:</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3013" id="3113">f′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#509" id="3116">∙</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3016" id="3118">a′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#509" id="3121">↘</a> <a class="Field" href="Cumulative.Semantics.PER.html#3065" id="3123">fa′</a>
    <a id="Π̂.fa≈fa′"></a><a class="Field" href="Cumulative.Semantics.PER.html#3131" id="3131">fa≈fa′</a> <a class="Symbol" id="3138">:</a> <a class="Field" href="Cumulative.Semantics.PER.html#3050" id="3140">fa</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3143">≈</a> <a class="Field" href="Cumulative.Semantics.PER.html#3065" id="3145">fa′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3149">∈</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3024" id="3151">R</a>

<a class="Keyword" id="3154">module</a> <a id="PERDef"></a><a class="Module" href="Cumulative.Semantics.PER.html#3161" id="3161">PERDef</a> <a class="Symbol" id="3168">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3169" id="3169">i</a> <a class="Symbol" id="3171">:</a> <a class="Datatype" href="Agda.Builtin.Nat.html#203" id="3173">ℕ</a><a class="Symbol" id="3174">)</a> <a class="Symbol" id="3176">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3177" id="3177">Univ</a> <a class="Symbol" id="3182">:</a> <a class="Symbol" id="3184">∀</a> <a class="Symbol" id="3186">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#3187" id="3187">j</a><a class="Symbol" id="3188">}</a> <a class="Symbol" id="3190">→</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3187" id="3192">j</a> <a class="Function Operator" href="Data.Nat.Base.html#1801" id="3194">&lt;</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3169" id="3196">i</a> <a class="Symbol" id="3198">→</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="3200">Ty</a><a class="Symbol" id="3202">)</a> <a class="Keyword" id="3204">where</a>

  <a class="Keyword" id="3213">mutual</a>

    <a class="Keyword" id="3225">data</a> <a id="PERDef.𝕌"></a><a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3230">𝕌</a> <a class="Symbol" id="3232">:</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="3234">Ty</a> <a class="Keyword" id="3237">where</a>
      <a id="PERDef.𝕌.ne"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3249" id="3249">ne</a> <a class="Symbol" id="3252">:</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2179" id="3254">C</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3256">≈</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2181" id="3258">C′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3261">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#729" id="3263">Bot</a> <a class="Symbol" id="3267">→</a>
           <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1286" id="3280">↑</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2110" id="3282">A</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2179" id="3284">C</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3286">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1286" id="3288">↑</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2112" id="3290">A′</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2181" id="3293">C′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3296">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3298">𝕌</a>
      <a id="PERDef.𝕌.N"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3306" id="3306">N</a>  <a class="Symbol" id="3309">:</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1134" id="3311">N</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3313">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1134" id="3315">N</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3317">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3319">𝕌</a>
      <a id="PERDef.𝕌.U"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3327" id="3327">U</a>  <a class="Symbol" id="3330">:</a> <a class="Symbol" id="3332">∀</a> <a class="Symbol" id="3334">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#3335" id="3335">j</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3337" id="3337">j′</a><a class="Symbol" id="3339">}</a> <a class="Symbol" id="3341">→</a>
           <a class="Bound" href="Cumulative.Semantics.PER.html#3335" id="3354">j</a> <a class="Function Operator" href="Data.Nat.Base.html#1801" id="3356">&lt;</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3169" id="3358">i</a> <a class="Symbol" id="3360">→</a>            <a class="Comment" id="3373">-- cumulativity only requires j &lt; i</a>
           <a class="Bound" href="Cumulative.Semantics.PER.html#3335" id="3420">j</a> <a class="Datatype Operator" href="Agda.Builtin.Equality.html#150" id="3422">≡</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3337" id="3424">j′</a> <a class="Symbol" id="3427">→</a>           <a class="Comment" id="3439">-- keeping equality here helps with --without-K settings</a>
           <a class="Comment" id="3507">--------------</a>
           <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1206" id="3533">U</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3335" id="3535">j</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3537">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1206" id="3539">U</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3337" id="3541">j′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3544">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3546">𝕌</a>
      <a id="PERDef.𝕌.Π"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3554" id="3554">Π</a>  <a class="Symbol" id="3557">:</a> <a class="Symbol" id="3559">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3560" id="3560">iA</a> <a class="Symbol" id="3563">:</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2110" id="3565">A</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3567">≈</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2112" id="3569">A′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3572">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3574">𝕌</a><a class="Symbol" id="3575">)</a> <a class="Symbol" id="3577">→</a>
           <a class="Symbol" id="3590">(∀</a> <a class="Symbol" id="3593">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#3594" id="3594">a</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3596" id="3596">a′</a><a class="Symbol" id="3598">}</a> <a class="Symbol" id="3600">→</a>
              <a class="Bound" href="Cumulative.Semantics.PER.html#3594" id="3616">a</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3618">≈</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3596" id="3620">a′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3623">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3625">El</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3560" id="3628">iA</a> <a class="Symbol" id="3631">→</a>
              <a class="Record" href="Cumulative.Semantics.PER.html#2702" id="3647">ΠRT</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2091" id="3651">T</a> <a class="Symbol" id="3653">(</a><a class="Generalizable" href="Cumulative.Semantics.Domain.html#2215" id="3654">ρ</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2435" id="3656">↦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3594" id="3658">a</a><a class="Symbol" id="3659">)</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2093" id="3661">T′</a> <a class="Symbol" id="3664">(</a><a class="Generalizable" href="Cumulative.Semantics.Domain.html#2217" id="3665">ρ′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2435" id="3668">↦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3596" id="3670">a′</a><a class="Symbol" id="3672">)</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3674">𝕌</a><a class="Symbol" id="3675">)</a> <a class="Symbol" id="3677">→</a>
           <a class="Comment" id="3690">-------------------------</a>
           <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1146" id="3727">Π</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2110" id="3729">A</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2091" id="3731">T</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2215" id="3733">ρ</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3735">≈</a> <a class="InductiveConstructor" href="Cumulative.Semantics.Domain.html#1146" id="3737">Π</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2112" id="3739">A′</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2093" id="3742">T′</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2217" id="3745">ρ′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3748">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3750">𝕌</a>


    <a id="PERDef.El"></a><a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3758">El</a> <a class="Symbol" id="3761">:</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2110" id="3763">A</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3765">≈</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2127" id="3767">B</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3769">∈</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="3771">𝕌</a> <a class="Symbol" id="3773">→</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="3775">Ty</a>
    <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3782">El</a> <a class="Symbol" id="3785">(</a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3249" id="3786">ne</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3789" id="3789">C≈C′</a><a class="Symbol" id="3793">)</a>  <a class="Symbol" id="3796">=</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#1444" id="3798">Neu</a>
    <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3806">El</a> <a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3306" id="3809">N</a>          <a class="Symbol" id="3820">=</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#1156" id="3822">Nat</a>
    <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3830">El</a> <a class="Symbol" id="3833">(</a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3327" id="3834">U</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3836" id="3836">j&lt;i</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3840" id="3840">eq</a><a class="Symbol" id="3842">)</a> <a class="Symbol" id="3844">=</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3177" id="3846">Univ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3836" id="3851">j&lt;i</a>
    <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3859">El</a> <a class="Symbol" id="3862">(</a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#3554" id="3863">Π</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3865" id="3865">iA</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3868" id="3868">RT</a><a class="Symbol" id="3870">)</a>  <a class="Symbol" id="3873">=</a> <a class="Symbol" id="3875">λ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3877" id="3877">f</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3879" id="3879">f′</a> <a class="Symbol" id="3882">→</a> <a class="Symbol" id="3884">∀</a> <a class="Symbol" id="3886">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#3887" id="3887">a</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3889" id="3889">b</a><a class="Symbol" id="3890">}</a> <a class="Symbol" id="3892">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3893" id="3893">inp</a> <a class="Symbol" id="3897">:</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3887" id="3899">a</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3901">≈</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3889" id="3903">b</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="3905">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3907">El</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3865" id="3910">iA</a><a class="Symbol" id="3912">)</a> <a class="Symbol" id="3914">→</a> <a class="Record" href="Cumulative.Semantics.PER.html#3005" id="3916">Π̂</a> <a class="Symbol" id="3919">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3877" id="3920">f</a><a class="Symbol" id="3921">)</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3887" id="3923">a</a> <a class="Symbol" id="3925">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3879" id="3926">f′</a><a class="Symbol" id="3928">)</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3889" id="3930">b</a> <a class="Symbol" id="3932">(</a><a class="Function" href="Cumulative.Semantics.PER.html#3758" id="3933">El</a> <a class="Symbol" id="3936">(</a><a class="Field" href="Cumulative.Semantics.PER.html#2825" id="3937">ΠRT.T≈T′</a> <a class="Symbol" id="3946">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#3868" id="3947">RT</a> <a class="Bound" href="Cumulative.Semantics.PER.html#3893" id="3950">inp</a><a class="Symbol" id="3953">)))</a>

<a class="Comment" id="3958">-- Now we tie the knot and expose 𝕌 and El in the wild.</a>
<a id="𝕌-wellfounded"></a><a class="Function" href="Cumulative.Semantics.PER.html#4014" id="4014">𝕌-wellfounded</a> <a class="Symbol" id="4028">:</a> <a class="Symbol" id="4030">∀</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4032" id="4032">i</a> <a class="Symbol" id="4034">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#4035" id="4035">j</a><a class="Symbol" id="4036">}</a> <a class="Symbol" id="4038">→</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4035" id="4040">j</a> <a class="Function Operator" href="Data.Nat.Base.html#1801" id="4042">&lt;</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4032" id="4044">i</a> <a class="Symbol" id="4046">→</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="4048">Ty</a>
<a class="Function" href="Cumulative.Semantics.PER.html#4014" id="4051">𝕌-wellfounded</a> <a class="DottedPattern Symbol" id="4065">.(</a><a class="DottedPattern InductiveConstructor" href="Agda.Builtin.Nat.html#234" id="4067">suc</a> <a class="DottedPattern Symbol" id="4071">_)</a> <a class="Symbol" id="4074">(</a><a class="InductiveConstructor" href="Data.Nat.Base.html#1756" id="4075">s≤s</a> <a class="Symbol" id="4079">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#4080" id="4080">j</a><a class="Symbol" id="4081">}</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4083" id="4083">j&lt;i</a><a class="Symbol" id="4086">)</a> <a class="Symbol" id="4088">=</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="4090">PERDef.𝕌</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4080" id="4099">j</a> <a class="Symbol" id="4101">(λ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4104" id="4104">j′&lt;j</a> <a class="Symbol" id="4109">→</a> <a class="Function" href="Cumulative.Semantics.PER.html#4014" id="4111">𝕌-wellfounded</a> <a class="Symbol" id="4125">_</a> <a class="Symbol" id="4127">(</a><a class="Function" href="Data.Nat.Properties.html#5988" id="4128">≤-trans</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4104" id="4136">j′&lt;j</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4083" id="4141">j&lt;i</a><a class="Symbol" id="4144">))</a>

<a class="Keyword" id="4148">private</a>
  <a class="Keyword" id="4158">module</a> <a id="M"></a><a class="Module" href="Cumulative.Semantics.PER.html#4165" id="4165">M</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4167" id="4167">i</a> <a class="Symbol" id="4169">=</a> <a class="Module" href="Cumulative.Semantics.PER.html#3161" id="4171">PERDef</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4167" id="4178">i</a> <a class="Symbol" id="4180">(</a><a class="Function" href="Cumulative.Semantics.PER.html#4014" id="4181">𝕌-wellfounded</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4167" id="4195">i</a><a class="Symbol" id="4196">)</a>

<a class="Keyword" id="4199">open</a> <a class="Module" href="Cumulative.Semantics.PER.html#4165" id="4204">M</a> <a class="Keyword" id="4206">hiding</a> <a class="Symbol" id="4213">(</a><a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="4214">𝕌</a><a class="Symbol" id="4215">;</a> <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="4217">El</a><a class="Symbol" id="4219">)</a> <a class="Keyword" id="4221">public</a>

<a class="Keyword" id="4229">pattern</a> <a id="U′"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#4237" id="4237">U′</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4248" id="4240">i&lt;j</a> <a class="Symbol" id="4244">=</a> <a class="InductiveConstructor" id="4246">U</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4248" id="4248">i&lt;j</a> <a class="InductiveConstructor" href="Agda.Builtin.Equality.html#207" id="4252">refl</a>

<a id="𝕌"></a><a class="Function" href="Cumulative.Semantics.PER.html#4258" id="4258">𝕌</a> <a class="Symbol" id="4260">:</a> <a class="Datatype" href="Agda.Builtin.Nat.html#203" id="4262">ℕ</a> <a class="Symbol" id="4264">→</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="4266">Ty</a>
<a class="Function" href="Cumulative.Semantics.PER.html#4258" id="4269">𝕌</a> <a class="Symbol" id="4271">=</a> <a class="Datatype" href="Cumulative.Semantics.PER.html#3230" id="4273">M.𝕌</a>

<a class="Comment" id="4278">-- cannot omit `i`. not sure why</a>
<a id="El"></a><a class="Function" href="Cumulative.Semantics.PER.html#4311" id="4311">El</a> <a class="Symbol" id="4314">:</a> <a class="Symbol" id="4316">∀</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4318" id="4318">i</a> <a class="Symbol" id="4320">→</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2110" id="4322">A</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="4324">≈</a> <a class="Generalizable" href="Cumulative.Semantics.Domain.html#2127" id="4326">B</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="4328">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#4258" id="4330">𝕌</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4318" id="4332">i</a> <a class="Symbol" id="4334">→</a> <a class="Function" href="Cumulative.Semantics.PER.html#610" id="4336">Ty</a>
<a class="Function" href="Cumulative.Semantics.PER.html#4311" id="4339">El</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4342" id="4342">i</a> <a class="Symbol" id="4344">=</a> <a class="Function" href="Cumulative.Semantics.PER.html#3758" id="4346">M.El</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4342" id="4351">i</a>


<a class="Comment" id="4355">-- On paper, it represents ⟦T⟧(ρ) ≈ ⟦T′⟧(ρ′) ∈ 𝕌 i.</a>
<a class="Keyword" id="4407">record</a> <a id="RelTyp"></a><a class="Record" href="Cumulative.Semantics.PER.html#4414" id="4414">RelTyp</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4421" id="4421">i</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4423" id="4423">T</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4425" id="4425">ρ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4427" id="4427">T′</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4430" id="4430">ρ′</a> <a class="Symbol" id="4433">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="4435">Set</a> <a class="Keyword" id="4439">where</a>
  <a class="Keyword" id="4447">field</a>
    <a id="RelTyp.⟦T⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#4457" id="4457">⟦T⟧</a>   <a class="Symbol" id="4463">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="4465">D</a>
    <a id="RelTyp.⟦T′⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#4471" id="4471">⟦T′⟧</a>  <a class="Symbol" id="4477">:</a> <a class="Datatype" href="Cumulative.Semantics.Domain.html#1116" id="4479">D</a>
    <a id="RelTyp.↘⟦T⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#4485" id="4485">↘⟦T⟧</a>  <a class="Symbol" id="4491">:</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="4493">⟦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4423" id="4495">T</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="4497">⟧</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4425" id="4499">ρ</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="4501">↘</a> <a class="Field" href="Cumulative.Semantics.PER.html#4457" id="4503">⟦T⟧</a>
    <a id="RelTyp.↘⟦T′⟧"></a><a class="Field" href="Cumulative.Semantics.PER.html#4511" id="4511">↘⟦T′⟧</a> <a class="Symbol" id="4517">:</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="4519">⟦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4427" id="4521">T′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="4524">⟧</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4430" id="4526">ρ′</a> <a class="Datatype Operator" href="Cumulative.Semantics.Evaluation.html#1182" id="4529">↘</a> <a class="Field" href="Cumulative.Semantics.PER.html#4471" id="4531">⟦T′⟧</a>
    <a id="RelTyp.T≈T′"></a><a class="Field" href="Cumulative.Semantics.PER.html#4540" id="4540">T≈T′</a>  <a class="Symbol" id="4546">:</a> <a class="Field" href="Cumulative.Semantics.PER.html#4457" id="4548">⟦T⟧</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="4552">≈</a> <a class="Field" href="Cumulative.Semantics.PER.html#4471" id="4554">⟦T′⟧</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="4559">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#4258" id="4561">𝕌</a> <a class="Bound" href="Cumulative.Semantics.PER.html#4421" id="4563">i</a>

<a class="Comment" id="4566">-- PER model for contexts and global evaluation environments</a>
<a class="Comment" id="4627">--</a>
<a class="Comment" id="4630">-- Again we use induction-recursion here in order to model related contexts and</a>
<a class="Comment" id="4710">-- related evaluation environments.</a>
<a class="Comment" id="4746">--</a>
<a class="Comment" id="4749">-- ⊨ Γ ≈ Δ means that Γ and Δ are two related contexts so that every</a>
<a class="Comment" id="4818">-- corresponding types in them are related after evaluation. The PER for</a>
<a class="Comment" id="4891">-- evaluation environments is defined recursively on ⊨ Γ ≈ Δ. On paper, we write</a>
<a class="Comment" id="4972">--</a>
<a class="Comment" id="4975">--       ρ ≈ ρ′ ∈ ⟦ Γ ⟧</a>
<a class="Comment" id="4999">--</a>
<a class="Comment" id="5002">-- where ⊨ Γ ≈ Γ, but this again will not work in Agda due to proof relevance. For</a>
<a class="Comment" id="5085">-- this reason, we must prove some extra properties.</a>
<a class="Keyword" id="5138">infix</a> <a class="Number" id="5144">4</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5146">⊨_≈_</a> <a class="Function Operator" href="Cumulative.Semantics.PER.html#5591" id="5151">⊨_</a>
<a class="Keyword" id="5154">mutual</a>
  <a class="Keyword" id="5163">data</a> <a id="⊨_≈_"></a><a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5168">⊨_≈_</a> <a class="Symbol" id="5173">:</a> <a class="Function" href="Cumulative.Statics.Syntax.html#1186" id="5175">Ctx</a> <a class="Symbol" id="5179">→</a> <a class="Function" href="Cumulative.Statics.Syntax.html#1186" id="5181">Ctx</a> <a class="Symbol" id="5185">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="5187">Set</a> <a class="Keyword" id="5191">where</a>
    <a id="⊨_≈_.[]-≈"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#5201" id="5201">[]-≈</a>   <a class="Symbol" id="5208">:</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5210">⊨</a> <a class="InductiveConstructor" href="Agda.Builtin.List.html#184" id="5212">[]</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5215">≈</a> <a class="InductiveConstructor" href="Agda.Builtin.List.html#184" id="5217">[]</a>
    <a id="⊨_≈_.∷-cong"></a><a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#5224" id="5224">∷-cong</a> <a class="Symbol" id="5231">:</a> <a class="Symbol" id="5233">∀</a> <a class="Symbol" id="5235">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#5236" id="5236">i</a><a class="Symbol" id="5237">}</a> <a class="Symbol" id="5239">→</a>
             <a class="Symbol" id="5254">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#5255" id="5255">Γ≈Δ</a> <a class="Symbol" id="5259">:</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5261">⊨</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2107" id="5263">Γ</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5265">≈</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2123" id="5267">Δ</a><a class="Symbol" id="5268">)</a> <a class="Symbol" id="5270">→</a>
             <a class="Symbol" id="5285">(∀</a> <a class="Symbol" id="5288">{</a><a class="Bound" href="Cumulative.Semantics.PER.html#5289" id="5289">ρ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5291" id="5291">ρ′</a><a class="Symbol" id="5293">}</a> <a class="Symbol" id="5295">→</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5289" id="5297">ρ</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="5299">≈</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5291" id="5301">ρ′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="5304">∈</a> <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5306">⟦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5255" id="5308">Γ≈Δ</a> <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5312">⟧ρ</a> <a class="Symbol" id="5315">→</a> <a class="Record" href="Cumulative.Semantics.PER.html#4414" id="5317">RelTyp</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5236" id="5324">i</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2091" id="5326">T</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5289" id="5328">ρ</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2093" id="5330">T′</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5291" id="5333">ρ′</a><a class="Symbol" id="5335">)</a> <a class="Symbol" id="5337">→</a>
             <a class="Comment" id="5352">----------------</a>
             <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5382">⊨</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2091" id="5384">T</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.List.html#199" id="5386">∷</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2107" id="5388">Γ</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5390">≈</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2093" id="5392">T′</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.List.html#199" id="5395">∷</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2123" id="5397">Δ</a>

  <a id="⟦_⟧ρ"></a><a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5402">⟦_⟧ρ</a> <a class="Symbol" id="5407">:</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5409">⊨</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2107" id="5411">Γ</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5413">≈</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2123" id="5415">Δ</a> <a class="Symbol" id="5417">→</a> <a class="Function" href="Cumulative.Semantics.PER.html#634" id="5419">Ev</a>
  <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5424">⟦</a> <a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#5201" id="5426">[]-≈</a> <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5431">⟧ρ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5434" id="5434">ρ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5436" id="5436">ρ′</a>           <a class="Symbol" id="5449">=</a> <a class="Record" href="Agda.Builtin.Unit.html#175" id="5451">⊤</a>
  <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5455">⟦</a> <a class="InductiveConstructor" href="Cumulative.Semantics.PER.html#5224" id="5457">∷-cong</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5464" id="5464">Γ≈Δ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5468" id="5468">rel</a> <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5472">⟧ρ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5475" id="5475">ρ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5477" id="5477">ρ′</a> <a class="Symbol" id="5480">=</a> <a class="Record" href="Agda.Builtin.Sigma.html#165" id="5482">Σ</a> <a class="Symbol" id="5484">(</a><a class="Function" href="Cumulative.Semantics.Domain.html#2562" id="5485">drop</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5475" id="5490">ρ</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="5492">≈</a> <a class="Function" href="Cumulative.Semantics.Domain.html#2562" id="5494">drop</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5477" id="5499">ρ′</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="5502">∈</a> <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5504">⟦</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5464" id="5506">Γ≈Δ</a> <a class="Function Operator" href="Cumulative.Semantics.PER.html#5402" id="5510">⟧ρ</a><a class="Symbol" id="5512">)</a> <a class="Symbol" id="5514">λ</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5516" id="5516">ρ≈ρ′</a> <a class="Symbol" id="5521">→</a> <a class="Keyword" id="5523">let</a> <a class="Keyword" id="5527">open</a> <a class="Module" href="Cumulative.Semantics.PER.html#4414" id="5532">RelTyp</a> <a class="Symbol" id="5539">(</a><a class="Bound" href="Cumulative.Semantics.PER.html#5468" id="5540">rel</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5516" id="5544">ρ≈ρ′</a><a class="Symbol" id="5548">)</a> <a class="Keyword" id="5550">in</a> <a class="Function" href="Cumulative.Semantics.Domain.html#2639" id="5553">lookup</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5475" id="5560">ρ</a> <a class="Number" id="5562">0</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="5564">≈</a> <a class="Function" href="Cumulative.Semantics.Domain.html#2639" id="5566">lookup</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5477" id="5573">ρ′</a> <a class="Number" id="5576">0</a> <a class="Function Operator" href="Cumulative.Semantics.Domain.html#2725" id="5578">∈</a> <a class="Function" href="Cumulative.Semantics.PER.html#4311" id="5580">El</a> <a class="Symbol" id="5583">_</a> <a class="Function" href="Cumulative.Semantics.PER.html#4540" id="5585">T≈T′</a>

<a id="⊨_"></a><a class="Function Operator" href="Cumulative.Semantics.PER.html#5591" id="5591">⊨_</a> <a class="Symbol" id="5594">:</a> <a class="Function" href="Cumulative.Statics.Syntax.html#1186" id="5596">Ctx</a> <a class="Symbol" id="5600">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="5602">Set</a>
<a class="Function Operator" href="Cumulative.Semantics.PER.html#5591" id="5606">⊨</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5608" id="5608">Γ</a> <a class="Symbol" id="5610">=</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5612">⊨</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5608" id="5614">Γ</a> <a class="Datatype Operator" href="Cumulative.Semantics.PER.html#5168" id="5616">≈</a> <a class="Bound" href="Cumulative.Semantics.PER.html#5608" id="5618">Γ</a>
</pre></div></body></html>