<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>Cumulative.Soundness</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Symbol" id="1">{-#</a> <a class="Keyword" id="5">OPTIONS</a> <a class="Pragma" id="13">--without-K</a> <a class="Pragma" id="25">--safe</a> <a class="Symbol" id="32">#-}</a>

<a class="Keyword" id="37">open</a> <a class="Keyword" id="42">import</a> <a class="Module" href="Level.html" id="49">Level</a>
<a class="Keyword" id="55">open</a> <a class="Keyword" id="60">import</a> <a class="Module" href="Axiom.Extensionality.Propositional.html" id="67">Axiom.Extensionality.Propositional</a>

<a class="Comment" id="103">-- Proof of the soundness theorem</a>
<a class="Comment" id="137">--</a>
<a class="Comment" id="140">-- If a term is well-typed, then it is equivalent to its βη normal form.</a>
<a class="Keyword" id="213">module</a> <a class="Module" href="Cumulative.Soundness.html" id="220">Cumulative.Soundness</a> <a class="Symbol" id="241">(</a><a class="Bound" href="Cumulative.Soundness.html#242" id="242">fext</a> <a class="Symbol" id="247">:</a> <a class="Function" href="Axiom.Extensionality.Propositional.html#750" id="249">Extensionality</a> <a class="Function" href="Level.html#521" id="264">0ℓ</a> <a class="Symbol" id="267">(</a><a class="Primitive" href="Agda.Primitive.html#931" id="268">suc</a> <a class="Function" href="Level.html#521" id="272">0ℓ</a><a class="Symbol" id="274">))</a> <a class="Keyword" id="277">where</a>

<a class="Keyword" id="284">open</a> <a class="Keyword" id="289">import</a> <a class="Module" href="Lib.html" id="296">Lib</a>

<a class="Keyword" id="301">open</a> <a class="Keyword" id="306">import</a> <a class="Module" href="Cumulative.Statics.Properties.html" id="313">Cumulative.Statics.Properties</a>
<a class="Keyword" id="343">open</a> <a class="Keyword" id="348">import</a> <a class="Module" href="Cumulative.Semantics.Readback.html" id="355">Cumulative.Semantics.Readback</a>
<a class="Keyword" id="385">open</a> <a class="Keyword" id="390">import</a> <a class="Module" href="Cumulative.Semantics.Properties.PER.html" id="397">Cumulative.Semantics.Properties.PER</a> <a class="Bound" href="Cumulative.Soundness.html#242" id="433">fext</a>
<a class="Keyword" id="438">open</a> <a class="Keyword" id="443">import</a> <a class="Module" href="Cumulative.Completeness.Fundamental.html" id="450">Cumulative.Completeness.Fundamental</a> <a class="Bound" href="Cumulative.Soundness.html#242" id="486">fext</a>
<a class="Keyword" id="491">open</a> <a class="Keyword" id="496">import</a> <a class="Module" href="Cumulative.Soundness.LogRel.html" id="503">Cumulative.Soundness.LogRel</a>
<a class="Keyword" id="531">open</a> <a class="Keyword" id="536">import</a> <a class="Module" href="Cumulative.Soundness.Properties.Substitutions.html" id="543">Cumulative.Soundness.Properties.Substitutions</a> <a class="Bound" href="Cumulative.Soundness.html#242" id="589">fext</a>
<a class="Keyword" id="594">open</a> <a class="Keyword" id="599">import</a> <a class="Module" href="Cumulative.Soundness.Realizability.html" id="606">Cumulative.Soundness.Realizability</a> <a class="Bound" href="Cumulative.Soundness.html#242" id="641">fext</a>
<a class="Keyword" id="646">open</a> <a class="Keyword" id="651">import</a> <a class="Module" href="Cumulative.Soundness.Fundamental.html" id="658">Cumulative.Soundness.Fundamental</a> <a class="Bound" href="Cumulative.Soundness.html#242" id="691">fext</a>


<a id="soundness"></a><a class="Function" href="Cumulative.Soundness.html#698" id="698">soundness</a> <a class="Symbol" id="708">:</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2107" id="710">Γ</a> <a class="Datatype Operator" href="Cumulative.Statics.Concise.html#978" id="712">⊢</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2139" id="714">t</a> <a class="Datatype Operator" href="Cumulative.Statics.Concise.html#978" id="716">∶</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2091" id="718">T</a> <a class="Symbol" id="720">→</a>
            <a class="Function" href="Data.Product.Base.html#852" id="734">∃</a> <a class="Symbol" id="736">λ</a> <a class="Bound" href="Cumulative.Soundness.html#738" id="738">w</a> <a class="Symbol" id="740">→</a> <a class="Record" href="Cumulative.Semantics.Readback.html#4964" id="742">NbE</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2107" id="746">Γ</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2139" id="748">t</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2091" id="750">T</a> <a class="Bound" href="Cumulative.Soundness.html#738" id="752">w</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="754">×</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2107" id="756">Γ</a> <a class="Datatype Operator" href="Cumulative.Statics.Concise.html#3166" id="758">⊢</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2139" id="760">t</a> <a class="Datatype Operator" href="Cumulative.Statics.Concise.html#3166" id="762">≈</a> <a class="Function" href="Cumulative.Statics.Syntax.html#2504" id="764">Nf⇒Exp</a> <a class="Bound" href="Cumulative.Soundness.html#738" id="771">w</a> <a class="Datatype Operator" href="Cumulative.Statics.Concise.html#3166" id="773">∶</a> <a class="Generalizable" href="Cumulative.Statics.Syntax.html#2091" id="775">T</a>
<a class="Function" href="Cumulative.Soundness.html#698" id="777">soundness</a> <a class="Symbol" id="787">{</a><a class="Bound" href="Cumulative.Soundness.html#788" id="788">Γ</a><a class="Symbol" id="789">}</a> <a class="Symbol" id="791">{</a><a class="Bound" href="Cumulative.Soundness.html#792" id="792">t</a><a class="Symbol" id="793">}</a> <a class="Symbol" id="795">{</a><a class="Bound" href="Cumulative.Soundness.html#796" id="796">T</a><a class="Symbol" id="797">}</a> <a class="Bound" href="Cumulative.Soundness.html#799" id="799">⊢t</a>
  <a class="Keyword" id="804">with</a> <a class="Keyword" id="809">record</a> <a class="Symbol" id="816">{</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10860" id="818">⊩Γ</a> <a class="Symbol" id="821">=</a> <a class="Bound" href="Cumulative.Soundness.html#823" id="823">⊩Γ</a> <a class="Symbol" id="826">;</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10991" id="828">krip</a> <a class="Symbol" id="833">=</a> <a class="Bound" href="Cumulative.Soundness.html#835" id="835">krip</a> <a class="Symbol" id="840">}</a> ← <a class="Function" href="Cumulative.Soundness.Fundamental.html#2814" id="844">fundamental-⊢t⇒⊩t</a> <a class="Bound" href="Cumulative.Soundness.html#799" id="862">⊢t</a>
    <a class="Keyword" id="869">with</a> <a class="Bound" href="Cumulative.Soundness.html#874" id="874">ρ</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="876">,</a> <a class="Symbol" id="878">_</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="880">,</a> <a class="Bound" href="Cumulative.Soundness.html#882" id="882">ρinit</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="888">,</a> <a class="Symbol" id="890">_</a> ← <a class="Function" href="Cumulative.Semantics.Properties.PER.html#23010" id="894">InitEnvs-related</a> <a class="Symbol" id="911">(</a><a class="Function" href="Cumulative.Completeness.Fundamental.html#692" id="912">fundamental-⊢Γ</a> <a class="Symbol" id="927">(</a><a class="Function" href="Cumulative.Soundness.LogRel.html#10209" id="928">⊩⇒⊢</a> <a class="Bound" href="Cumulative.Soundness.html#823" id="932">⊩Γ</a><a class="Symbol" id="934">))</a>
     <a class="Keyword" id="942">with</a> <a class="Keyword" id="947">record</a> <a class="Symbol" id="954">{</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10427" id="956">⟦T⟧</a> <a class="Symbol" id="960">=</a> <a class="Bound" href="Cumulative.Soundness.html#962" id="962">⟦T⟧</a> <a class="Symbol" id="966">;</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10441" id="968">⟦t⟧</a> <a class="Symbol" id="972">=</a> <a class="Bound" href="Cumulative.Soundness.html#974" id="974">⟦t⟧</a> <a class="Symbol" id="978">;</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10455" id="980">↘⟦T⟧</a> <a class="Symbol" id="985">=</a> <a class="Bound" href="Cumulative.Soundness.html#987" id="987">↘⟦T⟧</a> <a class="Symbol" id="992">;</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10481" id="994">↘⟦t⟧</a> <a class="Symbol" id="999">=</a> <a class="Bound" href="Cumulative.Soundness.html#1001" id="1001">↘⟦t⟧</a> <a class="Symbol" id="1006">;</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10507" id="1008">T∈𝕌</a> <a class="Symbol" id="1012">=</a> <a class="Bound" href="Cumulative.Soundness.html#1014" id="1014">T∈𝕌</a> <a class="Symbol" id="1018">;</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#10530" id="1020">t∼⟦t⟧</a> <a class="Symbol" id="1026">=</a> <a class="Bound" href="Cumulative.Soundness.html#1028" id="1028">t∼⟦t⟧</a> <a class="Symbol" id="1034">}</a> ← <a class="Bound" href="Cumulative.Soundness.html#835" id="1038">krip</a> <a class="Symbol" id="1043">(</a><a class="Function" href="Cumulative.Soundness.Properties.Substitutions.html#8028" id="1044">InitEnvs⇒s®I</a> <a class="Bound" href="Cumulative.Soundness.html#823" id="1057">⊩Γ</a> <a class="Bound" href="Cumulative.Soundness.html#882" id="1060">ρinit</a><a class="Symbol" id="1065">)</a>
        <a class="Keyword" id="1075">with</a> <a class="Keyword" id="1080">record</a> <a class="Symbol" id="1087">{</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#7973" id="1089">a∈⊤</a> <a class="Symbol" id="1093">=</a> <a class="Bound" href="Cumulative.Soundness.html#1095" id="1095">a∈⊤</a> <a class="Symbol" id="1099">;</a> <a class="Field" href="Cumulative.Soundness.LogRel.html#8004" id="1101">krip</a> <a class="Symbol" id="1106">=</a> <a class="Bound" href="Cumulative.Soundness.html#1108" id="1108">krip</a> <a class="Symbol" id="1113">}</a> ← <a class="Function" href="Cumulative.Soundness.Realizability.html#17887" id="1117">®El⇒®↑El</a> <a class="Bound" href="Cumulative.Soundness.html#1014" id="1126">T∈𝕌</a> <a class="Bound" href="Cumulative.Soundness.html#1028" id="1130">t∼⟦t⟧</a>
           <a class="Keyword" id="1147">with</a> <a class="Bound" href="Cumulative.Soundness.html#1152" id="1152">w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1154">,</a> <a class="Bound" href="Cumulative.Soundness.html#1156" id="1156">↘w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1159">,</a> <a class="Symbol" id="1161">_</a> ← <a class="Bound" href="Cumulative.Soundness.html#1095" id="1165">a∈⊤</a> <a class="Symbol" id="1169">(</a><a class="Field" href="LibNonEmpty.html#709" id="1170">len</a> <a class="Bound" href="Cumulative.Soundness.html#788" id="1174">Γ</a><a class="Symbol" id="1175">)</a>
              <a class="Symbol" id="1191">|</a> <a class="Bound" href="Cumulative.Soundness.html#1193" id="1193">eq</a> ← <a class="Bound" href="Cumulative.Soundness.html#1108" id="1198">krip</a> <a class="Symbol" id="1203">(</a><a class="Function" href="Cumulative.Soundness.Weakening.html#2352" id="1204">⊢wI</a> <a class="Symbol" id="1208">(</a><a class="Function" href="Cumulative.Soundness.LogRel.html#10209" id="1209">⊩⇒⊢</a> <a class="Bound" href="Cumulative.Soundness.html#823" id="1213">⊩Γ</a><a class="Symbol" id="1215">))</a> <a class="Symbol" id="1218">=</a> <a class="Bound" href="Cumulative.Soundness.html#1152" id="1220">w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1222">,</a> <a class="Function" href="Cumulative.Soundness.html#1257" id="1224">nbe</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1228">,</a> <a class="Function" href="Cumulative.Statics.Properties.html#8571" id="1230">[I]-≈ˡ</a> <a class="Symbol" id="1237">(</a><a class="Function" href="Cumulative.Statics.Properties.html#8571" id="1238">[I]-≈ˡ</a> <a class="Bound" href="Cumulative.Soundness.html#1193" id="1245">eq</a><a class="Symbol" id="1247">)</a>
  <a class="Keyword" id="1251">where</a> <a class="Function" href="Cumulative.Soundness.html#1257" id="1257">nbe</a> <a class="Symbol" id="1261">:</a> <a class="Record" href="Cumulative.Semantics.Readback.html#4964" id="1263">NbE</a> <a class="Bound" href="Cumulative.Soundness.html#788" id="1267">Γ</a> <a class="Bound" href="Cumulative.Soundness.html#792" id="1269">t</a> <a class="Bound" href="Cumulative.Soundness.html#796" id="1271">T</a> <a class="Bound" href="Cumulative.Soundness.html#1152" id="1273">w</a>
        <a class="Function" href="Cumulative.Soundness.html#1257" id="1283">nbe</a> <a class="Symbol" id="1287">=</a> <a class="Keyword" id="1289">record</a>
          <a class="Symbol" id="1306">{</a> <a class="Field" href="Cumulative.Semantics.Readback.html#5000" id="1308">envs</a> <a class="Symbol" id="1313">=</a> <a class="Bound" href="Cumulative.Soundness.html#874" id="1315">ρ</a>
          <a class="Symbol" id="1327">;</a> <a class="Field" href="Cumulative.Semantics.Readback.html#5015" id="1329">init</a> <a class="Symbol" id="1334">=</a> <a class="Bound" href="Cumulative.Soundness.html#882" id="1336">ρinit</a>
          <a class="Symbol" id="1352">;</a> <a class="Field" href="Cumulative.Semantics.Readback.html#5042" id="1354">nbe</a>  <a class="Symbol" id="1359">=</a> <a class="Keyword" id="1361">record</a>
            <a class="Symbol" id="1380">{</a> <a class="Field" href="Cumulative.Semantics.Readback.html#4444" id="1382">⟦t⟧</a>  <a class="Symbol" id="1387">=</a> <a class="Bound" href="Cumulative.Soundness.html#974" id="1389">⟦t⟧</a>
            <a class="Symbol" id="1405">;</a> <a class="Field" href="Cumulative.Semantics.Readback.html#4457" id="1407">⟦T⟧</a>  <a class="Symbol" id="1412">=</a> <a class="Bound" href="Cumulative.Soundness.html#962" id="1414">⟦T⟧</a>
            <a class="Symbol" id="1430">;</a> <a class="Field" href="Cumulative.Semantics.Readback.html#4470" id="1432">↘⟦t⟧</a> <a class="Symbol" id="1437">=</a> <a class="Bound" href="Cumulative.Soundness.html#1001" id="1439">↘⟦t⟧</a>
            <a class="Symbol" id="1456">;</a> <a class="Field" href="Cumulative.Semantics.Readback.html#4495" id="1458">↘⟦T⟧</a> <a class="Symbol" id="1463">=</a> <a class="Bound" href="Cumulative.Soundness.html#987" id="1465">↘⟦T⟧</a>
            <a class="Symbol" id="1482">;</a> <a class="Field" href="Cumulative.Semantics.Readback.html#4520" id="1484">↓⟦t⟧</a> <a class="Symbol" id="1489">=</a> <a class="Bound" href="Cumulative.Soundness.html#1156" id="1491">↘w</a>
            <a class="Symbol" id="1506">}</a>
          <a class="Symbol" id="1518">}</a>
</pre></div></body></html>