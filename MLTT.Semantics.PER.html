<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>MLTT.Semantics.PER</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Symbol" id="1">{-#</a> <a class="Keyword" id="5">OPTIONS</a> <a class="Pragma" id="13">--without-K</a> <a class="Pragma" id="25">--safe</a> <a class="Symbol" id="32">#-}</a>

<a class="Comment" id="37">-- Definition of the PER model</a>
<a class="Comment" id="68">--</a>
<a class="Comment" id="71">-- The PER model relates two domain values such that the syntactic terms they</a>
<a class="Comment" id="149">-- represent are equivalent. Since we are handling MLTT with full a ω universe, we must</a>
<a class="Comment" id="237">-- use a feature, induction-recursion, to strengthen the logical power of the</a>
<a class="Comment" id="315">-- meta-language.</a>
<a class="Keyword" id="333">module</a> <a class="Module" href="MLTT.Semantics.PER.html" id="340">MLTT.Semantics.PER</a> <a class="Keyword" id="359">where</a>

<a class="Keyword" id="366">open</a> <a class="Keyword" id="371">import</a> <a class="Module" href="Data.Nat.Properties.html" id="378">Data.Nat.Properties</a>

<a class="Keyword" id="399">open</a> <a class="Keyword" id="404">import</a> <a class="Module" href="Lib.html" id="411">Lib</a> <a class="Keyword" id="415">hiding</a> <a class="Symbol" id="422">(</a><a class="Function" href="Lib.html#7288" id="423">lookup</a><a class="Symbol" id="429">)</a>
<a class="Keyword" id="431">open</a> <a class="Keyword" id="436">import</a> <a class="Module" href="MLTT.Semantics.Domain.html" id="443">MLTT.Semantics.Domain</a>
<a class="Keyword" id="465">open</a> <a class="Keyword" id="470">import</a> <a class="Module" href="MLTT.Semantics.Evaluation.html" id="477">MLTT.Semantics.Evaluation</a>
<a class="Keyword" id="503">open</a> <a class="Keyword" id="508">import</a> <a class="Module" href="MLTT.Semantics.Readback.html" id="515">MLTT.Semantics.Readback</a>
<a class="Keyword" id="539">open</a> <a class="Keyword" id="544">import</a> <a class="Module" href="Relation.Binary.html" id="551">Relation.Binary</a> <a class="Keyword" id="567">using</a> <a class="Symbol" id="573">(</a><a class="Function" href="Relation.Binary.Core.html#896" id="574">Rel</a><a class="Symbol" id="577">)</a>

<a id="Ty"></a><a class="Function" href="MLTT.Semantics.PER.html#580" id="580">Ty</a> <a class="Symbol" id="583">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="585">Set₁</a>
<a class="Function" href="MLTT.Semantics.PER.html#580" id="590">Ty</a> <a class="Symbol" id="593">=</a> <a class="Function" href="Relation.Binary.Core.html#896" id="595">Rel</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="599">D</a> <a class="Symbol" id="601">_</a>

<a id="Ev"></a><a class="Function" href="MLTT.Semantics.PER.html#604" id="604">Ev</a> <a class="Symbol" id="607">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="609">Set₁</a>
<a class="Function" href="MLTT.Semantics.PER.html#604" id="614">Ev</a> <a class="Symbol" id="617">=</a> <a class="Function" href="Relation.Binary.Core.html#896" id="619">Rel</a> <a class="Function" href="MLTT.Semantics.Domain.html#763" id="623">Env</a> <a class="Symbol" id="627">_</a>

<a class="Comment" id="630">-- Two neutral domain values are related if they are read back equal</a>
<a id="Bot"></a><a class="Function" href="MLTT.Semantics.PER.html#699" id="699">Bot</a> <a class="Symbol" id="703">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1326" id="705">Dn</a> <a class="Symbol" id="708">→</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1326" id="710">Dn</a> <a class="Symbol" id="713">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="715">Set</a>
<a class="Function" href="MLTT.Semantics.PER.html#699" id="719">Bot</a> <a class="Bound" href="MLTT.Semantics.PER.html#723" id="723">c</a> <a class="Bound" href="MLTT.Semantics.PER.html#725" id="725">c′</a> <a class="Symbol" id="728">=</a> <a class="Symbol" id="730">∀</a> <a class="Bound" href="MLTT.Semantics.PER.html#732" id="732">n</a> <a class="Symbol" id="734">→</a> <a class="Function" href="Data.Product.Base.html#852" id="736">∃</a> <a class="Symbol" id="738">λ</a> <a class="Bound" href="MLTT.Semantics.PER.html#740" id="740">u</a> <a class="Symbol" id="742">→</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1814" id="744">Re</a> <a class="Bound" href="MLTT.Semantics.PER.html#732" id="747">n</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1814" id="749">-</a> <a class="Bound" href="MLTT.Semantics.PER.html#723" id="751">c</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1814" id="753">↘</a> <a class="Bound" href="MLTT.Semantics.PER.html#740" id="755">u</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="757">×</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1814" id="759">Re</a> <a class="Bound" href="MLTT.Semantics.PER.html#732" id="762">n</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1814" id="764">-</a> <a class="Bound" href="MLTT.Semantics.PER.html#725" id="766">c′</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1814" id="769">↘</a> <a class="Bound" href="MLTT.Semantics.PER.html#740" id="771">u</a>

<a class="Comment" id="774">-- Two normal domain values are related if they are read back equal</a>
<a id="Top"></a><a class="Function" href="MLTT.Semantics.PER.html#842" id="842">Top</a> <a class="Symbol" id="846">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1914" id="848">Df</a> <a class="Symbol" id="851">→</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1914" id="853">Df</a> <a class="Symbol" id="856">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="858">Set</a>
<a class="Function" href="MLTT.Semantics.PER.html#842" id="862">Top</a> <a class="Bound" href="MLTT.Semantics.PER.html#866" id="866">d</a> <a class="Bound" href="MLTT.Semantics.PER.html#868" id="868">d′</a> <a class="Symbol" id="871">=</a> <a class="Symbol" id="873">∀</a> <a class="Bound" href="MLTT.Semantics.PER.html#875" id="875">n</a> <a class="Symbol" id="877">→</a> <a class="Function" href="Data.Product.Base.html#852" id="879">∃</a> <a class="Symbol" id="881">λ</a> <a class="Bound" href="MLTT.Semantics.PER.html#883" id="883">w</a> <a class="Symbol" id="885">→</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1066" id="887">Rf</a> <a class="Bound" href="MLTT.Semantics.PER.html#875" id="890">n</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1066" id="892">-</a> <a class="Bound" href="MLTT.Semantics.PER.html#866" id="894">d</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1066" id="896">↘</a> <a class="Bound" href="MLTT.Semantics.PER.html#883" id="898">w</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="900">×</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1066" id="902">Rf</a> <a class="Bound" href="MLTT.Semantics.PER.html#875" id="905">n</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1066" id="907">-</a> <a class="Bound" href="MLTT.Semantics.PER.html#868" id="909">d′</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#1066" id="912">↘</a> <a class="Bound" href="MLTT.Semantics.PER.html#883" id="914">w</a>

<a class="Comment" id="917">-- Two domain values intended to represent types are related if they are read back equal</a>
<a id="TopT"></a><a class="Function" href="MLTT.Semantics.PER.html#1006" id="1006">TopT</a> <a class="Symbol" id="1011">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="1013">D</a> <a class="Symbol" id="1015">→</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="1017">D</a> <a class="Symbol" id="1019">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="1021">Set</a>
<a class="Function" href="MLTT.Semantics.PER.html#1006" id="1025">TopT</a> <a class="Bound" href="MLTT.Semantics.PER.html#1030" id="1030">A</a> <a class="Bound" href="MLTT.Semantics.PER.html#1032" id="1032">B</a> <a class="Symbol" id="1034">=</a> <a class="Symbol" id="1036">∀</a> <a class="Bound" href="MLTT.Semantics.PER.html#1038" id="1038">n</a> <a class="Symbol" id="1040">→</a> <a class="Function" href="Data.Product.Base.html#852" id="1042">∃</a> <a class="Symbol" id="1044">λ</a> <a class="Bound" href="MLTT.Semantics.PER.html#1046" id="1046">W</a> <a class="Symbol" id="1048">→</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#2546" id="1050">Rty</a> <a class="Bound" href="MLTT.Semantics.PER.html#1038" id="1054">n</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#2546" id="1056">-</a> <a class="Bound" href="MLTT.Semantics.PER.html#1030" id="1058">A</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#2546" id="1060">↘</a> <a class="Bound" href="MLTT.Semantics.PER.html#1046" id="1062">W</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="1064">×</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#2546" id="1066">Rty</a> <a class="Bound" href="MLTT.Semantics.PER.html#1038" id="1070">n</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#2546" id="1072">-</a> <a class="Bound" href="MLTT.Semantics.PER.html#1032" id="1074">B</a> <a class="Datatype Operator" href="MLTT.Semantics.Readback.html#2546" id="1076">↘</a> <a class="Bound" href="MLTT.Semantics.PER.html#1046" id="1078">W</a>

<a class="Comment" id="1081">-- A PER to model natural number values</a>
<a class="Keyword" id="1121">data</a> <a id="Nat"></a><a class="Datatype" href="MLTT.Semantics.PER.html#1126" id="1126">Nat</a> <a class="Symbol" id="1130">:</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="1132">Ty</a> <a class="Keyword" id="1135">where</a>
  <a id="Nat.ze"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#1143" id="1143">ze</a> <a class="Symbol" id="1146">:</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1204" id="1148">ze</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1151">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1204" id="1153">ze</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1156">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#1126" id="1158">Nat</a>
  <a id="Nat.su"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#1164" id="1164">su</a> <a class="Symbol" id="1167">:</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2058" id="1169">a</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1171">≈</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2075" id="1173">b</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1175">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#1126" id="1177">Nat</a> <a class="Symbol" id="1181">→</a>
       <a class="Comment" id="1190">-----------------</a>
       <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1216" id="1215">su</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2058" id="1218">a</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1220">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1216" id="1222">su</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2075" id="1225">b</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1227">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#1126" id="1229">Nat</a>
  <a id="Nat.ne"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#1235" id="1235">ne</a> <a class="Symbol" id="1238">:</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2143" id="1240">c</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1242">≈</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2145" id="1244">c′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1247">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#699" id="1249">Bot</a> <a class="Symbol" id="1253">→</a>
       <a class="Comment" id="1262">--------------------</a>
       <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1268" id="1290">↑</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2092" id="1292">A</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2143" id="1294">c</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1296">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1268" id="1298">↑</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2094" id="1300">A′</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2145" id="1303">c′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1306">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#1126" id="1308">Nat</a>

<a class="Comment" id="1313">-- Neutral type values are related simply when the neutral values themselves are related by Bot</a>
<a class="Keyword" id="1409">data</a> <a id="Neu"></a><a class="Datatype" href="MLTT.Semantics.PER.html#1414" id="1414">Neu</a> <a class="Symbol" id="1418">:</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="1420">Ty</a> <a class="Keyword" id="1423">where</a>
  <a id="Neu.ne"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#1431" id="1431">ne</a> <a class="Symbol" id="1434">:</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2143" id="1436">c</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1438">≈</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2145" id="1440">c′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1443">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#699" id="1445">Bot</a> <a class="Symbol" id="1449">→</a>
       <a class="Comment" id="1458">---------------------</a>
       <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1268" id="1487">↑</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2092" id="1489">A</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2143" id="1491">c</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1493">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1268" id="1495">↑</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2094" id="1497">A′</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2145" id="1500">c′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="1503">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#1414" id="1505">Neu</a>

<a class="Keyword" id="1510">pattern</a> <a id="ne′"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#1518" id="1518">ne′</a> <a class="Bound" href="MLTT.Semantics.PER.html#1549" id="1522">c≈c′</a> <a class="Symbol" id="1527">=</a> <a class="InductiveConstructor" id="1529">ne</a> <a class="Symbol" id="1532">{</a><a class="Argument" id="1533">A</a> <a class="Symbol" id="1535">=</a> <a class="InductiveConstructor" id="1537">N</a><a class="Symbol" id="1538">}</a> <a class="Symbol" id="1540">{</a><a class="Argument" id="1541">A′</a> <a class="Symbol" id="1544">=</a> <a class="InductiveConstructor" id="1546">N</a><a class="Symbol" id="1547">}</a> <a class="Bound" href="MLTT.Semantics.PER.html#1549" id="1549">c≈c′</a>

<a class="Comment" id="1555">-- Now we move on to defining the PER model. To model the universes, we use</a>
<a class="Comment" id="1631">-- Tarski-style encoding, i.e. for a universe level i, 𝕌 i is a PER relating two</a>
<a class="Comment" id="1712">-- domain values (or "codes") that are types (i.e. elements of the i'th level</a>
<a class="Comment" id="1790">-- universe). If A ≈ B ∈ 𝕌 i, then El i A relates two values that are elements of the</a>
<a class="Comment" id="1876">-- set encoded by A.</a>
<a class="Comment" id="1897">--</a>
<a class="Comment" id="1900">-- Unfortunately, this method only works on paper. In type theory, we must consider</a>
<a class="Comment" id="1984">-- the effect of proof relevance, when defining El, we must take a witness</a>
<a class="Comment" id="2059">-- A≈B : A ≈ B ∈ 𝕌 i instead of just A, and El is defined by recursion on A≈B, while 𝕌</a>
<a class="Comment" id="2146">-- itself is defined inductively, hence a induction-recursion definition.</a>
<a class="Comment" id="2220">--</a>
<a class="Comment" id="2223">-- Finally, we need a well-founded definition in order to handle cumulative</a>
<a class="Comment" id="2299">-- universe. In a non-cumulative setting, we expect that this extra well-founded layer</a>
<a class="Comment" id="2386">-- by the universe level can be taken away, because we can only grow the universe</a>
<a class="Comment" id="2468">-- level by one each time.</a>


<a class="Comment" id="2497">-- Helper definitions for the PER model</a>

<a class="Comment" id="2538">-- The record for relating return types of Π's</a>
<a class="Comment" id="2585">--</a>
<a class="Comment" id="2588">-- Here R is always 𝕌 i, so on paper, it represents ⟦T⟧(ρ) ≈ ⟦T′⟧(ρ′) ∈ 𝕌 i.</a>
<a class="Keyword" id="2665">record</a> <a id="ΠRT"></a><a class="Record" href="MLTT.Semantics.PER.html#2672" id="2672">ΠRT</a> <a class="Bound" href="MLTT.Semantics.PER.html#2676" id="2676">T</a> <a class="Bound" href="MLTT.Semantics.PER.html#2678" id="2678">ρ</a> <a class="Bound" href="MLTT.Semantics.PER.html#2680" id="2680">T′</a> <a class="Bound" href="MLTT.Semantics.PER.html#2683" id="2683">ρ′</a> <a class="Bound" href="MLTT.Semantics.PER.html#2686" id="2686">R</a> <a class="Symbol" id="2688">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="2690">Set</a> <a class="Keyword" id="2694">where</a>
  <a class="Keyword" id="2702">field</a>
    <a id="ΠRT.⟦T⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#2712" id="2712">⟦T⟧</a>   <a class="Symbol" id="2718">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="2720">D</a>
    <a id="ΠRT.⟦T′⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#2726" id="2726">⟦T′⟧</a>  <a class="Symbol" id="2732">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="2734">D</a>
    <a id="ΠRT.↘⟦T⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#2740" id="2740">↘⟦T⟧</a>  <a class="Symbol" id="2746">:</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="2748">⟦</a> <a class="Bound" href="MLTT.Semantics.PER.html#2676" id="2750">T</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="2752">⟧</a> <a class="Bound" href="MLTT.Semantics.PER.html#2678" id="2754">ρ</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="2756">↘</a> <a class="Field" href="MLTT.Semantics.PER.html#2712" id="2758">⟦T⟧</a>
    <a id="ΠRT.↘⟦T′⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#2766" id="2766">↘⟦T′⟧</a> <a class="Symbol" id="2772">:</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="2774">⟦</a> <a class="Bound" href="MLTT.Semantics.PER.html#2680" id="2776">T′</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="2779">⟧</a> <a class="Bound" href="MLTT.Semantics.PER.html#2683" id="2781">ρ′</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="2784">↘</a> <a class="Field" href="MLTT.Semantics.PER.html#2726" id="2786">⟦T′⟧</a>
    <a id="ΠRT.T≈T′"></a><a class="Field" href="MLTT.Semantics.PER.html#2795" id="2795">T≈T′</a>  <a class="Symbol" id="2801">:</a> <a class="Field" href="MLTT.Semantics.PER.html#2712" id="2803">⟦T⟧</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="2807">≈</a> <a class="Field" href="MLTT.Semantics.PER.html#2726" id="2809">⟦T′⟧</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="2814">∈</a> <a class="Bound" href="MLTT.Semantics.PER.html#2686" id="2816">R</a>


<a class="Comment" id="2820">-- The record for relating values of type Π A T ρ</a>
<a class="Comment" id="2870">--</a>
<a class="Comment" id="2873">-- Here R is always El i ⟦T⟧(ρ ↦ a), so on paper, it represents f a ≈ f′ a′ ∈ El i ⟦T⟧(ρ ↦ a).</a>
<a class="Keyword" id="2968">record</a> <a id="Π̂"></a><a class="Record" href="MLTT.Semantics.PER.html#2975" id="2975">Π̂</a> <a class="Symbol" id="2978">(</a><a class="Bound" href="MLTT.Semantics.PER.html#2979" id="2979">f</a> <a class="Bound" href="MLTT.Semantics.PER.html#2981" id="2981">a</a> <a class="Bound" href="MLTT.Semantics.PER.html#2983" id="2983">f′</a> <a class="Bound" href="MLTT.Semantics.PER.html#2986" id="2986">a′</a> <a class="Symbol" id="2989">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="2991">D</a><a class="Symbol" id="2992">)</a> <a class="Bound" href="MLTT.Semantics.PER.html#2994" id="2994">R</a> <a class="Symbol" id="2996">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="2998">Set</a> <a class="Keyword" id="3002">where</a>
  <a class="Keyword" id="3010">field</a>
    <a id="Π̂.fa"></a><a class="Field" href="MLTT.Semantics.PER.html#3020" id="3020">fa</a>     <a class="Symbol" id="3027">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="3029">D</a>
    <a id="Π̂.fa′"></a><a class="Field" href="MLTT.Semantics.PER.html#3035" id="3035">fa′</a>    <a class="Symbol" id="3042">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="3044">D</a>
    <a id="Π̂.↘fa"></a><a class="Field" href="MLTT.Semantics.PER.html#3050" id="3050">↘fa</a>    <a class="Symbol" id="3057">:</a> <a class="Bound" href="MLTT.Semantics.PER.html#2979" id="3059">f</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#497" id="3061">∙</a> <a class="Bound" href="MLTT.Semantics.PER.html#2981" id="3063">a</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#497" id="3065">↘</a> <a class="Field" href="MLTT.Semantics.PER.html#3020" id="3067">fa</a>
    <a id="Π̂.↘fa′"></a><a class="Field" href="MLTT.Semantics.PER.html#3074" id="3074">↘fa′</a>   <a class="Symbol" id="3081">:</a> <a class="Bound" href="MLTT.Semantics.PER.html#2983" id="3083">f′</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#497" id="3086">∙</a> <a class="Bound" href="MLTT.Semantics.PER.html#2986" id="3088">a′</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#497" id="3091">↘</a> <a class="Field" href="MLTT.Semantics.PER.html#3035" id="3093">fa′</a>
    <a id="Π̂.fa≈fa′"></a><a class="Field" href="MLTT.Semantics.PER.html#3101" id="3101">fa≈fa′</a> <a class="Symbol" id="3108">:</a> <a class="Field" href="MLTT.Semantics.PER.html#3020" id="3110">fa</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3113">≈</a> <a class="Field" href="MLTT.Semantics.PER.html#3035" id="3115">fa′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3119">∈</a> <a class="Bound" href="MLTT.Semantics.PER.html#2994" id="3121">R</a>

<a class="Keyword" id="3124">module</a> <a id="PERDef"></a><a class="Module" href="MLTT.Semantics.PER.html#3131" id="3131">PERDef</a> <a class="Symbol" id="3138">(</a><a class="Bound" href="MLTT.Semantics.PER.html#3139" id="3139">i</a> <a class="Symbol" id="3141">:</a> <a class="Datatype" href="Agda.Builtin.Nat.html#203" id="3143">ℕ</a><a class="Symbol" id="3144">)</a> <a class="Symbol" id="3146">(</a><a class="Bound" href="MLTT.Semantics.PER.html#3147" id="3147">Univ</a> <a class="Symbol" id="3152">:</a> <a class="Symbol" id="3154">∀</a> <a class="Symbol" id="3156">{</a><a class="Bound" href="MLTT.Semantics.PER.html#3157" id="3157">j</a><a class="Symbol" id="3158">}</a> <a class="Symbol" id="3160">→</a> <a class="Bound" href="MLTT.Semantics.PER.html#3157" id="3162">j</a> <a class="Function Operator" href="Data.Nat.Base.html#1801" id="3164">&lt;</a> <a class="Bound" href="MLTT.Semantics.PER.html#3139" id="3166">i</a> <a class="Symbol" id="3168">→</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="3170">Ty</a><a class="Symbol" id="3172">)</a> <a class="Keyword" id="3174">where</a>

  <a class="Keyword" id="3183">mutual</a>

    <a class="Keyword" id="3195">data</a> <a id="PERDef.𝕌"></a><a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3200">𝕌</a> <a class="Symbol" id="3202">:</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="3204">Ty</a> <a class="Keyword" id="3207">where</a>
      <a id="PERDef.𝕌.ne"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3219" id="3219">ne</a> <a class="Symbol" id="3222">:</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2161" id="3224">C</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3226">≈</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2163" id="3228">C′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3231">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#699" id="3233">Bot</a> <a class="Symbol" id="3237">→</a>
           <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1268" id="3250">↑</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2092" id="3252">A</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2161" id="3254">C</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3256">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1268" id="3258">↑</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2094" id="3260">A′</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2163" id="3263">C′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3266">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3268">𝕌</a>
      <a id="PERDef.𝕌.N"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3276" id="3276">N</a>  <a class="Symbol" id="3279">:</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1116" id="3281">N</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3283">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1116" id="3285">N</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3287">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3289">𝕌</a>
      <a id="PERDef.𝕌.U"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3297" id="3297">U</a>  <a class="Symbol" id="3300">:</a> <a class="Symbol" id="3302">∀</a> <a class="Symbol" id="3304">{</a><a class="Bound" href="MLTT.Semantics.PER.html#3305" id="3305">j</a> <a class="Bound" href="MLTT.Semantics.PER.html#3307" id="3307">j′</a><a class="Symbol" id="3309">}</a> <a class="Symbol" id="3311">→</a>
           <a class="Bound" href="MLTT.Semantics.PER.html#3305" id="3324">j</a> <a class="Function Operator" href="Data.Nat.Base.html#1801" id="3326">&lt;</a> <a class="Bound" href="MLTT.Semantics.PER.html#3139" id="3328">i</a> <a class="Symbol" id="3330">→</a>            <a class="Comment" id="3343">-- cumulativity only requires j &lt; i</a>
           <a class="Bound" href="MLTT.Semantics.PER.html#3305" id="3390">j</a> <a class="Datatype Operator" href="Agda.Builtin.Equality.html#150" id="3392">≡</a> <a class="Bound" href="MLTT.Semantics.PER.html#3307" id="3394">j′</a> <a class="Symbol" id="3397">→</a>           <a class="Comment" id="3409">-- keeping equality here helps with --without-K settings</a>
           <a class="Comment" id="3477">--------------</a>
           <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1188" id="3503">U</a> <a class="Bound" href="MLTT.Semantics.PER.html#3305" id="3505">j</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3507">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1188" id="3509">U</a> <a class="Bound" href="MLTT.Semantics.PER.html#3307" id="3511">j′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3514">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3516">𝕌</a>
      <a id="PERDef.𝕌.Π"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3524" id="3524">Π</a>  <a class="Symbol" id="3527">:</a> <a class="Symbol" id="3529">(</a><a class="Bound" href="MLTT.Semantics.PER.html#3530" id="3530">iA</a> <a class="Symbol" id="3533">:</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2092" id="3535">A</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3537">≈</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2094" id="3539">A′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3542">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3544">𝕌</a><a class="Symbol" id="3545">)</a> <a class="Symbol" id="3547">→</a>
           <a class="Symbol" id="3560">(∀</a> <a class="Symbol" id="3563">{</a><a class="Bound" href="MLTT.Semantics.PER.html#3564" id="3564">a</a> <a class="Bound" href="MLTT.Semantics.PER.html#3566" id="3566">a′</a><a class="Symbol" id="3568">}</a> <a class="Symbol" id="3570">→</a>
              <a class="Bound" href="MLTT.Semantics.PER.html#3564" id="3586">a</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3588">≈</a> <a class="Bound" href="MLTT.Semantics.PER.html#3566" id="3590">a′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3593">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#3728" id="3595">El</a> <a class="Bound" href="MLTT.Semantics.PER.html#3530" id="3598">iA</a> <a class="Symbol" id="3601">→</a>
              <a class="Record" href="MLTT.Semantics.PER.html#2672" id="3617">ΠRT</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2067" id="3621">T</a> <a class="Symbol" id="3623">(</a><a class="Generalizable" href="MLTT.Semantics.Domain.html#2197" id="3624">ρ</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2417" id="3626">↦</a> <a class="Bound" href="MLTT.Semantics.PER.html#3564" id="3628">a</a><a class="Symbol" id="3629">)</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2069" id="3631">T′</a> <a class="Symbol" id="3634">(</a><a class="Generalizable" href="MLTT.Semantics.Domain.html#2199" id="3635">ρ′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2417" id="3638">↦</a> <a class="Bound" href="MLTT.Semantics.PER.html#3566" id="3640">a′</a><a class="Symbol" id="3642">)</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3644">𝕌</a><a class="Symbol" id="3645">)</a> <a class="Symbol" id="3647">→</a>
           <a class="Comment" id="3660">-------------------------</a>
           <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1128" id="3697">Π</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2092" id="3699">A</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2067" id="3701">T</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2197" id="3703">ρ</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3705">≈</a> <a class="InductiveConstructor" href="MLTT.Semantics.Domain.html#1128" id="3707">Π</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2094" id="3709">A′</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2069" id="3712">T′</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2199" id="3715">ρ′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3718">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3720">𝕌</a>


    <a id="PERDef.El"></a><a class="Function" href="MLTT.Semantics.PER.html#3728" id="3728">El</a> <a class="Symbol" id="3731">:</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2092" id="3733">A</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3735">≈</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2109" id="3737">B</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3739">∈</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="3741">𝕌</a> <a class="Symbol" id="3743">→</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="3745">Ty</a>
    <a class="Function" href="MLTT.Semantics.PER.html#3728" id="3752">El</a> <a class="Symbol" id="3755">(</a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3219" id="3756">ne</a> <a class="Bound" href="MLTT.Semantics.PER.html#3759" id="3759">C≈C′</a><a class="Symbol" id="3763">)</a>  <a class="Symbol" id="3766">=</a> <a class="Datatype" href="MLTT.Semantics.PER.html#1414" id="3768">Neu</a>
    <a class="Function" href="MLTT.Semantics.PER.html#3728" id="3776">El</a> <a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3276" id="3779">N</a>          <a class="Symbol" id="3790">=</a> <a class="Datatype" href="MLTT.Semantics.PER.html#1126" id="3792">Nat</a>
    <a class="Function" href="MLTT.Semantics.PER.html#3728" id="3800">El</a> <a class="Symbol" id="3803">(</a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3297" id="3804">U</a> <a class="Bound" href="MLTT.Semantics.PER.html#3806" id="3806">j&lt;i</a> <a class="Bound" href="MLTT.Semantics.PER.html#3810" id="3810">eq</a><a class="Symbol" id="3812">)</a> <a class="Symbol" id="3814">=</a> <a class="Bound" href="MLTT.Semantics.PER.html#3147" id="3816">Univ</a> <a class="Bound" href="MLTT.Semantics.PER.html#3806" id="3821">j&lt;i</a>
    <a class="Function" href="MLTT.Semantics.PER.html#3728" id="3829">El</a> <a class="Symbol" id="3832">(</a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#3524" id="3833">Π</a> <a class="Bound" href="MLTT.Semantics.PER.html#3835" id="3835">iA</a> <a class="Bound" href="MLTT.Semantics.PER.html#3838" id="3838">RT</a><a class="Symbol" id="3840">)</a>  <a class="Symbol" id="3843">=</a> <a class="Symbol" id="3845">λ</a> <a class="Bound" href="MLTT.Semantics.PER.html#3847" id="3847">f</a> <a class="Bound" href="MLTT.Semantics.PER.html#3849" id="3849">f′</a> <a class="Symbol" id="3852">→</a> <a class="Symbol" id="3854">∀</a> <a class="Symbol" id="3856">{</a><a class="Bound" href="MLTT.Semantics.PER.html#3857" id="3857">a</a> <a class="Bound" href="MLTT.Semantics.PER.html#3859" id="3859">b</a><a class="Symbol" id="3860">}</a> <a class="Symbol" id="3862">(</a><a class="Bound" href="MLTT.Semantics.PER.html#3863" id="3863">inp</a> <a class="Symbol" id="3867">:</a> <a class="Bound" href="MLTT.Semantics.PER.html#3857" id="3869">a</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3871">≈</a> <a class="Bound" href="MLTT.Semantics.PER.html#3859" id="3873">b</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="3875">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#3728" id="3877">El</a> <a class="Bound" href="MLTT.Semantics.PER.html#3835" id="3880">iA</a><a class="Symbol" id="3882">)</a> <a class="Symbol" id="3884">→</a> <a class="Record" href="MLTT.Semantics.PER.html#2975" id="3886">Π̂</a> <a class="Symbol" id="3889">(</a><a class="Bound" href="MLTT.Semantics.PER.html#3847" id="3890">f</a><a class="Symbol" id="3891">)</a> <a class="Bound" href="MLTT.Semantics.PER.html#3857" id="3893">a</a> <a class="Symbol" id="3895">(</a><a class="Bound" href="MLTT.Semantics.PER.html#3849" id="3896">f′</a><a class="Symbol" id="3898">)</a> <a class="Bound" href="MLTT.Semantics.PER.html#3859" id="3900">b</a> <a class="Symbol" id="3902">(</a><a class="Function" href="MLTT.Semantics.PER.html#3728" id="3903">El</a> <a class="Symbol" id="3906">(</a><a class="Field" href="MLTT.Semantics.PER.html#2795" id="3907">ΠRT.T≈T′</a> <a class="Symbol" id="3916">(</a><a class="Bound" href="MLTT.Semantics.PER.html#3838" id="3917">RT</a> <a class="Bound" href="MLTT.Semantics.PER.html#3863" id="3920">inp</a><a class="Symbol" id="3923">)))</a>

<a class="Comment" id="3928">-- Now we tie the knot and expose 𝕌 and El in the wild.</a>
<a id="𝕌-wellfounded"></a><a class="Function" href="MLTT.Semantics.PER.html#3984" id="3984">𝕌-wellfounded</a> <a class="Symbol" id="3998">:</a> <a class="Symbol" id="4000">∀</a> <a class="Bound" href="MLTT.Semantics.PER.html#4002" id="4002">i</a> <a class="Symbol" id="4004">{</a><a class="Bound" href="MLTT.Semantics.PER.html#4005" id="4005">j</a><a class="Symbol" id="4006">}</a> <a class="Symbol" id="4008">→</a> <a class="Bound" href="MLTT.Semantics.PER.html#4005" id="4010">j</a> <a class="Function Operator" href="Data.Nat.Base.html#1801" id="4012">&lt;</a> <a class="Bound" href="MLTT.Semantics.PER.html#4002" id="4014">i</a> <a class="Symbol" id="4016">→</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="4018">Ty</a>
<a class="Function" href="MLTT.Semantics.PER.html#3984" id="4021">𝕌-wellfounded</a> <a class="DottedPattern Symbol" id="4035">.(</a><a class="DottedPattern InductiveConstructor" href="Agda.Builtin.Nat.html#234" id="4037">suc</a> <a class="DottedPattern Symbol" id="4041">_)</a> <a class="Symbol" id="4044">(</a><a class="InductiveConstructor" href="Data.Nat.Base.html#1756" id="4045">s≤s</a> <a class="Symbol" id="4049">{</a><a class="Bound" href="MLTT.Semantics.PER.html#4050" id="4050">j</a><a class="Symbol" id="4051">}</a> <a class="Bound" href="MLTT.Semantics.PER.html#4053" id="4053">j&lt;i</a><a class="Symbol" id="4056">)</a> <a class="Symbol" id="4058">=</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="4060">PERDef.𝕌</a> <a class="Bound" href="MLTT.Semantics.PER.html#4050" id="4069">j</a> <a class="Symbol" id="4071">(λ</a> <a class="Bound" href="MLTT.Semantics.PER.html#4074" id="4074">j′&lt;j</a> <a class="Symbol" id="4079">→</a> <a class="Function" href="MLTT.Semantics.PER.html#3984" id="4081">𝕌-wellfounded</a> <a class="Symbol" id="4095">_</a> <a class="Symbol" id="4097">(</a><a class="Function" href="Data.Nat.Properties.html#5425" id="4098">≤-trans</a> <a class="Bound" href="MLTT.Semantics.PER.html#4074" id="4106">j′&lt;j</a> <a class="Bound" href="MLTT.Semantics.PER.html#4053" id="4111">j&lt;i</a><a class="Symbol" id="4114">))</a>

<a class="Keyword" id="4118">private</a>
  <a class="Keyword" id="4128">module</a> <a id="M"></a><a class="Module" href="MLTT.Semantics.PER.html#4135" id="4135">M</a> <a class="Bound" href="MLTT.Semantics.PER.html#4137" id="4137">i</a> <a class="Symbol" id="4139">=</a> <a class="Module" href="MLTT.Semantics.PER.html#3131" id="4141">PERDef</a> <a class="Bound" href="MLTT.Semantics.PER.html#4137" id="4148">i</a> <a class="Symbol" id="4150">(</a><a class="Function" href="MLTT.Semantics.PER.html#3984" id="4151">𝕌-wellfounded</a> <a class="Bound" href="MLTT.Semantics.PER.html#4137" id="4165">i</a><a class="Symbol" id="4166">)</a>

<a class="Keyword" id="4169">open</a> <a class="Module" href="MLTT.Semantics.PER.html#4135" id="4174">M</a> <a class="Keyword" id="4176">hiding</a> <a class="Symbol" id="4183">(</a><a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="4184">𝕌</a><a class="Symbol" id="4185">;</a> <a class="Function" href="MLTT.Semantics.PER.html#3728" id="4187">El</a><a class="Symbol" id="4189">)</a> <a class="Keyword" id="4191">public</a>

<a class="Keyword" id="4199">pattern</a> <a id="U′"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#4207" id="4207">U′</a> <a class="Bound" href="MLTT.Semantics.PER.html#4218" id="4210">i&lt;j</a> <a class="Symbol" id="4214">=</a> <a class="InductiveConstructor" id="4216">U</a> <a class="Bound" href="MLTT.Semantics.PER.html#4218" id="4218">i&lt;j</a> <a class="InductiveConstructor" href="Agda.Builtin.Equality.html#207" id="4222">refl</a>

<a id="𝕌"></a><a class="Function" href="MLTT.Semantics.PER.html#4228" id="4228">𝕌</a> <a class="Symbol" id="4230">:</a> <a class="Datatype" href="Agda.Builtin.Nat.html#203" id="4232">ℕ</a> <a class="Symbol" id="4234">→</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="4236">Ty</a>
<a class="Function" href="MLTT.Semantics.PER.html#4228" id="4239">𝕌</a> <a class="Symbol" id="4241">=</a> <a class="Datatype" href="MLTT.Semantics.PER.html#3200" id="4243">M.𝕌</a>

<a class="Comment" id="4248">-- cannot omit `i`. not sure why</a>
<a id="El"></a><a class="Function" href="MLTT.Semantics.PER.html#4281" id="4281">El</a> <a class="Symbol" id="4284">:</a> <a class="Symbol" id="4286">∀</a> <a class="Bound" href="MLTT.Semantics.PER.html#4288" id="4288">i</a> <a class="Symbol" id="4290">→</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2092" id="4292">A</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="4294">≈</a> <a class="Generalizable" href="MLTT.Semantics.Domain.html#2109" id="4296">B</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="4298">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#4228" id="4300">𝕌</a> <a class="Bound" href="MLTT.Semantics.PER.html#4288" id="4302">i</a> <a class="Symbol" id="4304">→</a> <a class="Function" href="MLTT.Semantics.PER.html#580" id="4306">Ty</a>
<a class="Function" href="MLTT.Semantics.PER.html#4281" id="4309">El</a> <a class="Bound" href="MLTT.Semantics.PER.html#4312" id="4312">i</a> <a class="Symbol" id="4314">=</a> <a class="Function" href="MLTT.Semantics.PER.html#3728" id="4316">M.El</a> <a class="Bound" href="MLTT.Semantics.PER.html#4312" id="4321">i</a>


<a class="Comment" id="4325">-- On paper, it represents ⟦T⟧(ρ) ≈ ⟦T′⟧(ρ′) ∈ 𝕌 i.</a>
<a class="Keyword" id="4377">record</a> <a id="RelTyp"></a><a class="Record" href="MLTT.Semantics.PER.html#4384" id="4384">RelTyp</a> <a class="Bound" href="MLTT.Semantics.PER.html#4391" id="4391">i</a> <a class="Bound" href="MLTT.Semantics.PER.html#4393" id="4393">T</a> <a class="Bound" href="MLTT.Semantics.PER.html#4395" id="4395">ρ</a> <a class="Bound" href="MLTT.Semantics.PER.html#4397" id="4397">T′</a> <a class="Bound" href="MLTT.Semantics.PER.html#4400" id="4400">ρ′</a> <a class="Symbol" id="4403">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="4405">Set</a> <a class="Keyword" id="4409">where</a>
  <a class="Keyword" id="4417">field</a>
    <a id="RelTyp.⟦T⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#4427" id="4427">⟦T⟧</a>   <a class="Symbol" id="4433">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="4435">D</a>
    <a id="RelTyp.⟦T′⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#4441" id="4441">⟦T′⟧</a>  <a class="Symbol" id="4447">:</a> <a class="Datatype" href="MLTT.Semantics.Domain.html#1098" id="4449">D</a>
    <a id="RelTyp.↘⟦T⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#4455" id="4455">↘⟦T⟧</a>  <a class="Symbol" id="4461">:</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="4463">⟦</a> <a class="Bound" href="MLTT.Semantics.PER.html#4393" id="4465">T</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="4467">⟧</a> <a class="Bound" href="MLTT.Semantics.PER.html#4395" id="4469">ρ</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="4471">↘</a> <a class="Field" href="MLTT.Semantics.PER.html#4427" id="4473">⟦T⟧</a>
    <a id="RelTyp.↘⟦T′⟧"></a><a class="Field" href="MLTT.Semantics.PER.html#4481" id="4481">↘⟦T′⟧</a> <a class="Symbol" id="4487">:</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="4489">⟦</a> <a class="Bound" href="MLTT.Semantics.PER.html#4397" id="4491">T′</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="4494">⟧</a> <a class="Bound" href="MLTT.Semantics.PER.html#4400" id="4496">ρ′</a> <a class="Datatype Operator" href="MLTT.Semantics.Evaluation.html#1170" id="4499">↘</a> <a class="Field" href="MLTT.Semantics.PER.html#4441" id="4501">⟦T′⟧</a>
    <a id="RelTyp.T≈T′"></a><a class="Field" href="MLTT.Semantics.PER.html#4510" id="4510">T≈T′</a>  <a class="Symbol" id="4516">:</a> <a class="Field" href="MLTT.Semantics.PER.html#4427" id="4518">⟦T⟧</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="4522">≈</a> <a class="Field" href="MLTT.Semantics.PER.html#4441" id="4524">⟦T′⟧</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="4529">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#4228" id="4531">𝕌</a> <a class="Bound" href="MLTT.Semantics.PER.html#4391" id="4533">i</a>

<a class="Comment" id="4536">-- PER model for context stacks and global evaluation environments</a>
<a class="Comment" id="4603">--</a>
<a class="Comment" id="4606">-- Again we use induction-recursion here in order to model related context stacks and</a>
<a class="Comment" id="4692">-- related evaluation environments.</a>
<a class="Comment" id="4728">--</a>
<a class="Comment" id="4731">-- ⊨ Γ ≈ Δ means that Γ and Δ are two related contexts so that every</a>
<a class="Comment" id="4800">-- corresponding types in them are related after evaluation. The PER for</a>
<a class="Comment" id="4873">-- evaluation environments is defined recursively on ⊨ Γ ≈ Δ. On paper, we write</a>
<a class="Comment" id="4954">--</a>
<a class="Comment" id="4957">--       ρ ≈ ρ′ ∈ ⟦ Γ ⟧</a>
<a class="Comment" id="4981">--</a>
<a class="Comment" id="4984">-- where ⊨ Γ ≈ Γ, but this again will not work in Agda due to proof relevance. For</a>
<a class="Comment" id="5067">-- this reason, we must prove some extra properties.</a>
<a class="Keyword" id="5120">infix</a> <a class="Number" id="5126">4</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5128">⊨_≈_</a> <a class="Function Operator" href="MLTT.Semantics.PER.html#5573" id="5133">⊨_</a>
<a class="Keyword" id="5136">mutual</a>
  <a class="Keyword" id="5145">data</a> <a id="⊨_≈_"></a><a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5150">⊨_≈_</a> <a class="Symbol" id="5155">:</a> <a class="Function" href="MLTT.Statics.Syntax.html#1162" id="5157">Ctx</a> <a class="Symbol" id="5161">→</a> <a class="Function" href="MLTT.Statics.Syntax.html#1162" id="5163">Ctx</a> <a class="Symbol" id="5167">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="5169">Set</a> <a class="Keyword" id="5173">where</a>
    <a id="⊨_≈_.[]-≈"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#5183" id="5183">[]-≈</a>   <a class="Symbol" id="5190">:</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5192">⊨</a> <a class="InductiveConstructor" href="Agda.Builtin.List.html#184" id="5194">[]</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5197">≈</a> <a class="InductiveConstructor" href="Agda.Builtin.List.html#184" id="5199">[]</a>
    <a id="⊨_≈_.∷-cong"></a><a class="InductiveConstructor" href="MLTT.Semantics.PER.html#5206" id="5206">∷-cong</a> <a class="Symbol" id="5213">:</a> <a class="Symbol" id="5215">∀</a> <a class="Symbol" id="5217">{</a><a class="Bound" href="MLTT.Semantics.PER.html#5218" id="5218">i</a><a class="Symbol" id="5219">}</a> <a class="Symbol" id="5221">→</a>
             <a class="Symbol" id="5236">(</a><a class="Bound" href="MLTT.Semantics.PER.html#5237" id="5237">Γ≈Δ</a> <a class="Symbol" id="5241">:</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5243">⊨</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2083" id="5245">Γ</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5247">≈</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2099" id="5249">Δ</a><a class="Symbol" id="5250">)</a> <a class="Symbol" id="5252">→</a>
             <a class="Symbol" id="5267">(∀</a> <a class="Symbol" id="5270">{</a><a class="Bound" href="MLTT.Semantics.PER.html#5271" id="5271">ρ</a> <a class="Bound" href="MLTT.Semantics.PER.html#5273" id="5273">ρ′</a><a class="Symbol" id="5275">}</a> <a class="Symbol" id="5277">→</a> <a class="Bound" href="MLTT.Semantics.PER.html#5271" id="5279">ρ</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="5281">≈</a> <a class="Bound" href="MLTT.Semantics.PER.html#5273" id="5283">ρ′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="5286">∈</a> <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5288">⟦</a> <a class="Bound" href="MLTT.Semantics.PER.html#5237" id="5290">Γ≈Δ</a> <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5294">⟧ρ</a> <a class="Symbol" id="5297">→</a> <a class="Record" href="MLTT.Semantics.PER.html#4384" id="5299">RelTyp</a> <a class="Bound" href="MLTT.Semantics.PER.html#5218" id="5306">i</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2067" id="5308">T</a> <a class="Bound" href="MLTT.Semantics.PER.html#5271" id="5310">ρ</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2069" id="5312">T′</a> <a class="Bound" href="MLTT.Semantics.PER.html#5273" id="5315">ρ′</a><a class="Symbol" id="5317">)</a> <a class="Symbol" id="5319">→</a>
             <a class="Comment" id="5334">----------------</a>
             <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5364">⊨</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2067" id="5366">T</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.List.html#199" id="5368">∷</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2083" id="5370">Γ</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5372">≈</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2069" id="5374">T′</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.List.html#199" id="5377">∷</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2099" id="5379">Δ</a>

  <a id="⟦_⟧ρ"></a><a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5384">⟦_⟧ρ</a> <a class="Symbol" id="5389">:</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5391">⊨</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2083" id="5393">Γ</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5395">≈</a> <a class="Generalizable" href="MLTT.Statics.Syntax.html#2099" id="5397">Δ</a> <a class="Symbol" id="5399">→</a> <a class="Function" href="MLTT.Semantics.PER.html#604" id="5401">Ev</a>
  <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5406">⟦</a> <a class="InductiveConstructor" href="MLTT.Semantics.PER.html#5183" id="5408">[]-≈</a> <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5413">⟧ρ</a> <a class="Bound" href="MLTT.Semantics.PER.html#5416" id="5416">ρ</a> <a class="Bound" href="MLTT.Semantics.PER.html#5418" id="5418">ρ′</a>           <a class="Symbol" id="5431">=</a> <a class="Record" href="Agda.Builtin.Unit.html#175" id="5433">⊤</a>
  <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5437">⟦</a> <a class="InductiveConstructor" href="MLTT.Semantics.PER.html#5206" id="5439">∷-cong</a> <a class="Bound" href="MLTT.Semantics.PER.html#5446" id="5446">Γ≈Δ</a> <a class="Bound" href="MLTT.Semantics.PER.html#5450" id="5450">rel</a> <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5454">⟧ρ</a> <a class="Bound" href="MLTT.Semantics.PER.html#5457" id="5457">ρ</a> <a class="Bound" href="MLTT.Semantics.PER.html#5459" id="5459">ρ′</a> <a class="Symbol" id="5462">=</a> <a class="Record" href="Agda.Builtin.Sigma.html#165" id="5464">Σ</a> <a class="Symbol" id="5466">(</a><a class="Function" href="MLTT.Semantics.Domain.html#2544" id="5467">drop</a> <a class="Bound" href="MLTT.Semantics.PER.html#5457" id="5472">ρ</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="5474">≈</a> <a class="Function" href="MLTT.Semantics.Domain.html#2544" id="5476">drop</a> <a class="Bound" href="MLTT.Semantics.PER.html#5459" id="5481">ρ′</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="5484">∈</a> <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5486">⟦</a> <a class="Bound" href="MLTT.Semantics.PER.html#5446" id="5488">Γ≈Δ</a> <a class="Function Operator" href="MLTT.Semantics.PER.html#5384" id="5492">⟧ρ</a><a class="Symbol" id="5494">)</a> <a class="Symbol" id="5496">λ</a> <a class="Bound" href="MLTT.Semantics.PER.html#5498" id="5498">ρ≈ρ′</a> <a class="Symbol" id="5503">→</a> <a class="Keyword" id="5505">let</a> <a class="Keyword" id="5509">open</a> <a class="Module" href="MLTT.Semantics.PER.html#4384" id="5514">RelTyp</a> <a class="Symbol" id="5521">(</a><a class="Bound" href="MLTT.Semantics.PER.html#5450" id="5522">rel</a> <a class="Bound" href="MLTT.Semantics.PER.html#5498" id="5526">ρ≈ρ′</a><a class="Symbol" id="5530">)</a> <a class="Keyword" id="5532">in</a> <a class="Function" href="MLTT.Semantics.Domain.html#2621" id="5535">lookup</a> <a class="Bound" href="MLTT.Semantics.PER.html#5457" id="5542">ρ</a> <a class="Number" id="5544">0</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="5546">≈</a> <a class="Function" href="MLTT.Semantics.Domain.html#2621" id="5548">lookup</a> <a class="Bound" href="MLTT.Semantics.PER.html#5459" id="5555">ρ′</a> <a class="Number" id="5558">0</a> <a class="Function Operator" href="MLTT.Semantics.Domain.html#2707" id="5560">∈</a> <a class="Function" href="MLTT.Semantics.PER.html#4281" id="5562">El</a> <a class="Symbol" id="5565">_</a> <a class="Function" href="MLTT.Semantics.PER.html#4510" id="5567">T≈T′</a>

<a id="⊨_"></a><a class="Function Operator" href="MLTT.Semantics.PER.html#5573" id="5573">⊨_</a> <a class="Symbol" id="5576">:</a> <a class="Function" href="MLTT.Statics.Syntax.html#1162" id="5578">Ctx</a> <a class="Symbol" id="5582">→</a> <a class="Primitive" href="Agda.Primitive.html#388" id="5584">Set</a>
<a class="Function Operator" href="MLTT.Semantics.PER.html#5573" id="5588">⊨</a> <a class="Bound" href="MLTT.Semantics.PER.html#5590" id="5590">Γ</a> <a class="Symbol" id="5592">=</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5594">⊨</a> <a class="Bound" href="MLTT.Semantics.PER.html#5590" id="5596">Γ</a> <a class="Datatype Operator" href="MLTT.Semantics.PER.html#5150" id="5598">≈</a> <a class="Bound" href="MLTT.Semantics.PER.html#5590" id="5600">Γ</a>
</pre></div></body></html>