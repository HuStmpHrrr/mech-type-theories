<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>NonCumulative.Ascribed.Soundness</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Symbol" id="1">{-#</a> <a class="Keyword" id="5">OPTIONS</a> <a class="Pragma" id="13">--without-K</a> <a class="Pragma" id="25">--safe</a> <a class="Symbol" id="32">#-}</a>

<a class="Keyword" id="37">open</a> <a class="Keyword" id="42">import</a> <a class="Module" href="Level.html" id="49">Level</a>
<a class="Keyword" id="55">open</a> <a class="Keyword" id="60">import</a> <a class="Module" href="Axiom.Extensionality.Propositional.html" id="67">Axiom.Extensionality.Propositional</a>

<a class="Comment" id="103">-- Proof of the soundness theorem</a>
<a class="Comment" id="137">--</a>
<a class="Comment" id="140">-- If a term is well-typed, then it is equivalent to its βη normal form.</a>
<a class="Keyword" id="213">module</a> <a class="Module" href="NonCumulative.Ascribed.Soundness.html" id="220">NonCumulative.Ascribed.Soundness</a><a class="Symbol" id="252">(</a><a class="Bound" href="NonCumulative.Ascribed.Soundness.html#253" id="253">fext</a> <a class="Symbol" id="258">:</a> <a class="Symbol" id="260">∀</a> <a class="Symbol" id="262">{</a><a class="Bound" href="NonCumulative.Ascribed.Soundness.html#263" id="263">ℓ₁</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#266" id="266">ℓ₂</a><a class="Symbol" id="268">}</a> <a class="Symbol" id="270">→</a> <a class="Function" href="Axiom.Extensionality.Propositional.html#750" id="272">Extensionality</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#263" id="287">ℓ₁</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#266" id="290">ℓ₂</a><a class="Symbol" id="292">)</a> <a class="Keyword" id="294">where</a>

<a class="Keyword" id="301">open</a> <a class="Keyword" id="306">import</a> <a class="Module" href="Lib.html" id="313">Lib</a>

<a class="Keyword" id="318">open</a> <a class="Keyword" id="323">import</a> <a class="Module" href="NonCumulative.Ascribed.Statics.Properties.html" id="330">NonCumulative.Ascribed.Statics.Properties</a>
<a class="Keyword" id="372">open</a> <a class="Keyword" id="377">import</a> <a class="Module" href="NonCumulative.Ascribed.Semantics.Readback.html" id="384">NonCumulative.Ascribed.Semantics.Readback</a>
<a class="Keyword" id="426">open</a> <a class="Keyword" id="431">import</a> <a class="Module" href="NonCumulative.Ascribed.Semantics.Properties.PER.html" id="438">NonCumulative.Ascribed.Semantics.Properties.PER</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#253" id="486">fext</a>
<a class="Keyword" id="491">open</a> <a class="Keyword" id="496">import</a> <a class="Module" href="NonCumulative.Ascribed.Completeness.Fundamental.html" id="503">NonCumulative.Ascribed.Completeness.Fundamental</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#253" id="551">fext</a>
<a class="Keyword" id="556">open</a> <a class="Keyword" id="561">import</a> <a class="Module" href="NonCumulative.Ascribed.Soundness.LogRel.html" id="568">NonCumulative.Ascribed.Soundness.LogRel</a>
<a class="Keyword" id="608">open</a> <a class="Keyword" id="613">import</a> <a class="Module" href="NonCumulative.Ascribed.Soundness.Properties.Substitutions.html" id="620">NonCumulative.Ascribed.Soundness.Properties.Substitutions</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#253" id="678">fext</a>
<a class="Keyword" id="683">open</a> <a class="Keyword" id="688">import</a> <a class="Module" href="NonCumulative.Ascribed.Soundness.Realizability.html" id="695">NonCumulative.Ascribed.Soundness.Realizability</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#253" id="742">fext</a>
<a class="Keyword" id="747">open</a> <a class="Keyword" id="752">import</a> <a class="Module" href="NonCumulative.Ascribed.Soundness.Fundamental.html" id="759">NonCumulative.Ascribed.Soundness.Fundamental</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#253" id="804">fext</a>


<a id="soundness"></a><a class="Function" href="NonCumulative.Ascribed.Soundness.html#811" id="811">soundness</a> <a class="Symbol" id="821">:</a> <a class="Symbol" id="823">∀</a> <a class="Symbol" id="825">{</a><a class="Bound" href="NonCumulative.Ascribed.Soundness.html#826" id="826">i</a><a class="Symbol" id="827">}</a> <a class="Symbol" id="829">→</a>
            <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2836" id="843">Γ</a> <a class="Datatype Operator" href="NonCumulative.Ascribed.Statics.Full.html#836" id="845">⊢</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2940" id="847">t</a> <a class="Datatype Operator" href="NonCumulative.Ascribed.Statics.Full.html#836" id="849">∶[</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#826" id="852">i</a> <a class="Datatype Operator" href="NonCumulative.Ascribed.Statics.Full.html#836" id="854">]</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2884" id="856">T</a> <a class="Symbol" id="858">→</a>
            <a class="Function" href="Data.Product.Base.html#852" id="872">∃</a> <a class="Symbol" id="874">λ</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#876" id="876">w</a> <a class="Symbol" id="878">→</a> <a class="Record" href="NonCumulative.Ascribed.Semantics.Readback.html#6154" id="880">NbE</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2836" id="884">Γ</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2940" id="886">t</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#826" id="888">i</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2884" id="890">T</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#876" id="892">w</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="894">×</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2836" id="896">Γ</a> <a class="Datatype Operator" href="NonCumulative.Ascribed.Statics.Full.html#4105" id="898">⊢</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2940" id="900">t</a> <a class="Datatype Operator" href="NonCumulative.Ascribed.Statics.Full.html#4105" id="902">≈</a> <a class="Function" href="NonCumulative.Ascribed.Statics.Syntax.html#3409" id="904">Nf⇒Exp</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#876" id="911">w</a> <a class="Datatype Operator" href="NonCumulative.Ascribed.Statics.Full.html#4105" id="913">∶[</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#826" id="916">i</a> <a class="Datatype Operator" href="NonCumulative.Ascribed.Statics.Full.html#4105" id="918">]</a> <a class="Generalizable" href="NonCumulative.Ascribed.Statics.Syntax.html#2884" id="920">T</a>
<a class="Function" href="NonCumulative.Ascribed.Soundness.html#811" id="922">soundness</a> <a class="Symbol" id="932">{</a><a class="Bound" href="NonCumulative.Ascribed.Soundness.html#933" id="933">Γ</a><a class="Symbol" id="934">}</a> <a class="Symbol" id="936">{</a><a class="Bound" href="NonCumulative.Ascribed.Soundness.html#937" id="937">t</a><a class="Symbol" id="938">}</a> <a class="Symbol" id="940">{</a><a class="Bound" href="NonCumulative.Ascribed.Soundness.html#941" id="941">T</a><a class="Symbol" id="942">}</a> <a class="Symbol" id="944">{</a><a class="Bound" href="NonCumulative.Ascribed.Soundness.html#945" id="945">i</a><a class="Symbol" id="946">}</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#948" id="948">⊢t</a>
  <a class="Keyword" id="953">with</a> <a class="Keyword" id="958">record</a> <a class="Symbol" id="965">{</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#15368" id="967">⊩Γ</a> <a class="Symbol" id="970">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#972" id="972">⊩Γ</a> <a class="Symbol" id="975">;</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#15486" id="977">krip</a> <a class="Symbol" id="982">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#984" id="984">krip</a> <a class="Symbol" id="989">}</a> ← <a class="Function" href="NonCumulative.Ascribed.Soundness.Fundamental.html#938" id="993">fundamental-⊢t⇒⊩t</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#948" id="1011">⊢t</a>
    <a class="Keyword" id="1018">with</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1023" id="1023">ρ</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1025">,</a> <a class="Symbol" id="1027">_</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1029">,</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1031" id="1031">ρinit</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1037">,</a> <a class="Symbol" id="1039">_</a> ← <a class="Function" href="NonCumulative.Ascribed.Semantics.Properties.PER.html#31162" id="1043">InitEnvs-related</a> <a class="Symbol" id="1060">(</a><a class="Function" href="NonCumulative.Ascribed.Completeness.Fundamental.html#863" id="1061">fundamental-⊢Γ</a> <a class="Symbol" id="1076">(</a><a class="Function" href="NonCumulative.Ascribed.Soundness.LogRel.html#14709" id="1077">⊩⇒⊢</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#972" id="1081">⊩Γ</a><a class="Symbol" id="1083">))</a>
     <a class="Keyword" id="1091">with</a> <a class="Keyword" id="1096">record</a> <a class="Symbol" id="1103">{</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#14927" id="1105">⟦T⟧</a> <a class="Symbol" id="1109">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1111" id="1111">⟦T⟧</a> <a class="Symbol" id="1115">;</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#14941" id="1117">⟦t⟧</a> <a class="Symbol" id="1121">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1123" id="1123">⟦t⟧</a> <a class="Symbol" id="1127">;</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#14955" id="1129">↘⟦T⟧</a> <a class="Symbol" id="1134">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1136" id="1136">↘⟦T⟧</a> <a class="Symbol" id="1141">;</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#14981" id="1143">↘⟦t⟧</a> <a class="Symbol" id="1148">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1150" id="1150">↘⟦t⟧</a> <a class="Symbol" id="1155">;</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#15007" id="1157">T∈𝕌</a> <a class="Symbol" id="1161">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1163" id="1163">T∈𝕌</a> <a class="Symbol" id="1167">;</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#15030" id="1169">t∼⟦t⟧</a> <a class="Symbol" id="1175">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1177" id="1177">t∼⟦t⟧</a> <a class="Symbol" id="1183">}</a> ← <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#984" id="1187">krip</a> <a class="Symbol" id="1192">(</a><a class="Function" href="NonCumulative.Ascribed.Soundness.Properties.Substitutions.html#7983" id="1193">InitEnvs⇒s®I</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#972" id="1206">⊩Γ</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1031" id="1209">ρinit</a><a class="Symbol" id="1214">)</a>
        <a class="Keyword" id="1224">with</a> <a class="Keyword" id="1229">record</a> <a class="Symbol" id="1236">{</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#11285" id="1238">a∈⊤</a> <a class="Symbol" id="1242">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1244" id="1244">a∈⊤</a> <a class="Symbol" id="1248">;</a> <a class="Field" href="NonCumulative.Ascribed.Soundness.LogRel.html#11320" id="1250">krip</a> <a class="Symbol" id="1255">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1257" id="1257">krip</a> <a class="Symbol" id="1262">}</a> ← <a class="Function" href="NonCumulative.Ascribed.Soundness.Realizability.html#26141" id="1266">®El⇒®↑El</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1163" id="1275">T∈𝕌</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1177" id="1279">t∼⟦t⟧</a>
           <a class="Keyword" id="1296">with</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1301" id="1301">w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1303">,</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1305" id="1305">↘w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1308">,</a> <a class="Symbol" id="1310">_</a> ← <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1244" id="1314">a∈⊤</a> <a class="Symbol" id="1318">(</a><a class="Field" href="LibNonEmpty.html#709" id="1319">len</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#933" id="1323">Γ</a><a class="Symbol" id="1324">)</a>
              <a class="Symbol" id="1340">|</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1342" id="1342">eq</a> ← <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1257" id="1347">krip</a> <a class="Symbol" id="1352">(</a><a class="Function" href="NonCumulative.Ascribed.Soundness.Weakening.html#2621" id="1353">⊢wI</a> <a class="Symbol" id="1357">(</a><a class="Function" href="NonCumulative.Ascribed.Soundness.LogRel.html#14709" id="1358">⊩⇒⊢</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#972" id="1362">⊩Γ</a><a class="Symbol" id="1364">))</a> <a class="Symbol" id="1367">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1301" id="1369">w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1371">,</a> <a class="Function" href="NonCumulative.Ascribed.Soundness.html#1406" id="1373">nbe</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1377">,</a> <a class="Function" href="NonCumulative.Ascribed.Statics.Properties.html#2598" id="1379">[I]-≈ˡ</a> <a class="Symbol" id="1386">(</a><a class="Function" href="NonCumulative.Ascribed.Statics.Properties.html#2598" id="1387">[I]-≈ˡ</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1342" id="1394">eq</a><a class="Symbol" id="1396">)</a>
  <a class="Keyword" id="1400">where</a> <a class="Function" href="NonCumulative.Ascribed.Soundness.html#1406" id="1406">nbe</a> <a class="Symbol" id="1410">:</a> <a class="Record" href="NonCumulative.Ascribed.Semantics.Readback.html#6154" id="1412">NbE</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#933" id="1416">Γ</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#937" id="1418">t</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#945" id="1420">i</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#941" id="1422">T</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1301" id="1424">w</a>
        <a class="Function" href="NonCumulative.Ascribed.Soundness.html#1406" id="1434">nbe</a> <a class="Symbol" id="1438">=</a> <a class="Keyword" id="1440">record</a>
          <a class="Symbol" id="1457">{</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#6192" id="1459">envs</a> <a class="Symbol" id="1464">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1023" id="1466">ρ</a>
          <a class="Symbol" id="1478">;</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#6207" id="1480">init</a> <a class="Symbol" id="1485">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1031" id="1487">ρinit</a>
          <a class="Symbol" id="1503">;</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#6234" id="1505">nbe</a>  <a class="Symbol" id="1510">=</a> <a class="Keyword" id="1512">record</a>
            <a class="Symbol" id="1531">{</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#5607" id="1533">⟦t⟧</a>  <a class="Symbol" id="1538">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1123" id="1540">⟦t⟧</a>
            <a class="Symbol" id="1556">;</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#5620" id="1558">⟦T⟧</a>  <a class="Symbol" id="1563">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1111" id="1565">⟦T⟧</a>
            <a class="Symbol" id="1581">;</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#5633" id="1583">↘⟦t⟧</a> <a class="Symbol" id="1588">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1150" id="1590">↘⟦t⟧</a>
            <a class="Symbol" id="1607">;</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#5658" id="1609">↘⟦T⟧</a> <a class="Symbol" id="1614">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1136" id="1616">↘⟦T⟧</a>
            <a class="Symbol" id="1633">;</a> <a class="Field" href="NonCumulative.Ascribed.Semantics.Readback.html#5683" id="1635">↓⟦t⟧</a> <a class="Symbol" id="1640">=</a> <a class="Bound" href="NonCumulative.Ascribed.Soundness.html#1305" id="1642">↘w</a>
            <a class="Symbol" id="1657">}</a>
          <a class="Symbol" id="1669">}</a></pre></div></body></html>