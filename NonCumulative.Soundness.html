<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>NonCumulative.Soundness</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Symbol" id="1">{-#</a> <a class="Keyword" id="5">OPTIONS</a> <a class="Pragma" id="13">--without-K</a> <a class="Pragma" id="25">--safe</a> <a class="Symbol" id="32">#-}</a>

<a class="Keyword" id="37">open</a> <a class="Keyword" id="42">import</a> <a class="Module" href="Level.html" id="49">Level</a>
<a class="Keyword" id="55">open</a> <a class="Keyword" id="60">import</a> <a class="Module" href="Axiom.Extensionality.Propositional.html" id="67">Axiom.Extensionality.Propositional</a>

<a class="Comment" id="103">-- Proof of the soundness theorem</a>
<a class="Comment" id="137">--</a>
<a class="Comment" id="140">-- If a term is well-typed, then it is equivalent to its βη normal form.</a>
<a class="Keyword" id="213">module</a> <a class="Module" href="NonCumulative.Soundness.html" id="220">NonCumulative.Soundness</a> <a class="Symbol" id="244">(</a><a class="Bound" href="NonCumulative.Soundness.html#245" id="245">fext</a> <a class="Symbol" id="250">:</a> <a class="Symbol" id="252">∀</a> <a class="Symbol" id="254">{</a><a class="Bound" href="NonCumulative.Soundness.html#255" id="255">ℓ₁</a> <a class="Bound" href="NonCumulative.Soundness.html#258" id="258">ℓ₂</a><a class="Symbol" id="260">}</a> <a class="Symbol" id="262">→</a> <a class="Function" href="Axiom.Extensionality.Propositional.html#750" id="264">Extensionality</a> <a class="Bound" href="NonCumulative.Soundness.html#255" id="279">ℓ₁</a> <a class="Bound" href="NonCumulative.Soundness.html#258" id="282">ℓ₂</a><a class="Symbol" id="284">)</a> <a class="Keyword" id="286">where</a>

<a class="Keyword" id="293">open</a> <a class="Keyword" id="298">import</a> <a class="Module" href="Lib.html" id="305">Lib</a>

<a class="Keyword" id="310">open</a> <a class="Keyword" id="315">import</a> <a class="Module" href="NonCumulative.Statics.Ascribed.Properties.html" id="322">NonCumulative.Statics.Ascribed.Properties</a>
<a class="Keyword" id="364">open</a> <a class="Keyword" id="369">import</a> <a class="Module" href="NonCumulative.Semantics.Readback.html" id="376">NonCumulative.Semantics.Readback</a>
<a class="Keyword" id="409">open</a> <a class="Keyword" id="414">import</a> <a class="Module" href="NonCumulative.Semantics.Properties.PER.html" id="421">NonCumulative.Semantics.Properties.PER</a> <a class="Bound" href="NonCumulative.Soundness.html#245" id="460">fext</a>
<a class="Keyword" id="465">open</a> <a class="Keyword" id="470">import</a> <a class="Module" href="NonCumulative.Completeness.Fundamental.html" id="477">NonCumulative.Completeness.Fundamental</a> <a class="Bound" href="NonCumulative.Soundness.html#245" id="516">fext</a>
<a class="Keyword" id="521">open</a> <a class="Keyword" id="526">import</a> <a class="Module" href="NonCumulative.Soundness.LogRel.html" id="533">NonCumulative.Soundness.LogRel</a>
<a class="Keyword" id="564">open</a> <a class="Keyword" id="569">import</a> <a class="Module" href="NonCumulative.Soundness.Properties.Substitutions.html" id="576">NonCumulative.Soundness.Properties.Substitutions</a> <a class="Bound" href="NonCumulative.Soundness.html#245" id="625">fext</a>
<a class="Keyword" id="630">open</a> <a class="Keyword" id="635">import</a> <a class="Module" href="NonCumulative.Soundness.Realizability.html" id="642">NonCumulative.Soundness.Realizability</a> <a class="Bound" href="NonCumulative.Soundness.html#245" id="680">fext</a>
<a class="Keyword" id="685">open</a> <a class="Keyword" id="690">import</a> <a class="Module" href="NonCumulative.Soundness.Fundamental.html" id="697">NonCumulative.Soundness.Fundamental</a> <a class="Bound" href="NonCumulative.Soundness.html#245" id="733">fext</a>


<a id="soundness"></a><a class="Function" href="NonCumulative.Soundness.html#740" id="740">soundness</a> <a class="Symbol" id="750">:</a> <a class="Symbol" id="752">∀</a> <a class="Symbol" id="754">{</a><a class="Bound" href="NonCumulative.Soundness.html#755" id="755">i</a><a class="Symbol" id="756">}</a> <a class="Symbol" id="758">→</a>
            <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2836" id="772">Γ</a> <a class="Datatype Operator" href="NonCumulative.Statics.Ascribed.Full.html#836" id="774">⊢</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2940" id="776">t</a> <a class="Datatype Operator" href="NonCumulative.Statics.Ascribed.Full.html#836" id="778">∶[</a> <a class="Bound" href="NonCumulative.Soundness.html#755" id="781">i</a> <a class="Datatype Operator" href="NonCumulative.Statics.Ascribed.Full.html#836" id="783">]</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2884" id="785">T</a> <a class="Symbol" id="787">→</a>
            <a class="Function" href="Data.Product.Base.html#852" id="801">∃</a> <a class="Symbol" id="803">λ</a> <a class="Bound" href="NonCumulative.Soundness.html#805" id="805">w</a> <a class="Symbol" id="807">→</a> <a class="Record" href="NonCumulative.Semantics.Readback.html#6354" id="809">NbE</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2836" id="813">Γ</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2940" id="815">t</a> <a class="Bound" href="NonCumulative.Soundness.html#755" id="817">i</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2884" id="819">T</a> <a class="Bound" href="NonCumulative.Soundness.html#805" id="821">w</a> <a class="Function Operator" href="Data.Product.Base.html#1618" id="823">×</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2836" id="825">Γ</a> <a class="Datatype Operator" href="NonCumulative.Statics.Ascribed.Full.html#4105" id="827">⊢</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2940" id="829">t</a> <a class="Datatype Operator" href="NonCumulative.Statics.Ascribed.Full.html#4105" id="831">≈</a> <a class="Function" href="NonCumulative.Statics.Ascribed.Syntax.html#3409" id="833">Nf⇒Exp</a> <a class="Bound" href="NonCumulative.Soundness.html#805" id="840">w</a> <a class="Datatype Operator" href="NonCumulative.Statics.Ascribed.Full.html#4105" id="842">∶[</a> <a class="Bound" href="NonCumulative.Soundness.html#755" id="845">i</a> <a class="Datatype Operator" href="NonCumulative.Statics.Ascribed.Full.html#4105" id="847">]</a> <a class="Generalizable" href="NonCumulative.Statics.Ascribed.Syntax.html#2884" id="849">T</a>
<a class="Function" href="NonCumulative.Soundness.html#740" id="851">soundness</a> <a class="Symbol" id="861">{</a><a class="Bound" href="NonCumulative.Soundness.html#862" id="862">Γ</a><a class="Symbol" id="863">}</a> <a class="Symbol" id="865">{</a><a class="Bound" href="NonCumulative.Soundness.html#866" id="866">t</a><a class="Symbol" id="867">}</a> <a class="Symbol" id="869">{</a><a class="Bound" href="NonCumulative.Soundness.html#870" id="870">T</a><a class="Symbol" id="871">}</a> <a class="Symbol" id="873">{</a><a class="Bound" href="NonCumulative.Soundness.html#874" id="874">i</a><a class="Symbol" id="875">}</a> <a class="Bound" href="NonCumulative.Soundness.html#877" id="877">⊢t</a>
  <a class="Keyword" id="882">with</a> <a class="Keyword" id="887">record</a> <a class="Symbol" id="894">{</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#15323" id="896">⊩Γ</a> <a class="Symbol" id="899">=</a> <a class="Bound" href="NonCumulative.Soundness.html#901" id="901">⊩Γ</a> <a class="Symbol" id="904">;</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#15441" id="906">krip</a> <a class="Symbol" id="911">=</a> <a class="Bound" href="NonCumulative.Soundness.html#913" id="913">krip</a> <a class="Symbol" id="918">}</a> ← <a class="Function" href="NonCumulative.Soundness.Fundamental.html#866" id="922">fundamental-⊢t⇒⊩t</a> <a class="Bound" href="NonCumulative.Soundness.html#877" id="940">⊢t</a>
    <a class="Keyword" id="947">with</a> <a class="Bound" href="NonCumulative.Soundness.html#952" id="952">ρ</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="954">,</a> <a class="Symbol" id="956">_</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="958">,</a> <a class="Bound" href="NonCumulative.Soundness.html#960" id="960">ρinit</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="966">,</a> <a class="Symbol" id="968">_</a> ← <a class="Function" href="NonCumulative.Semantics.Properties.PER.html#31099" id="972">InitEnvs-related</a> <a class="Symbol" id="989">(</a><a class="Function" href="NonCumulative.Completeness.Fundamental.html#782" id="990">fundamental-⊢Γ</a> <a class="Symbol" id="1005">(</a><a class="Function" href="NonCumulative.Soundness.LogRel.html#14664" id="1006">⊩⇒⊢</a> <a class="Bound" href="NonCumulative.Soundness.html#901" id="1010">⊩Γ</a><a class="Symbol" id="1012">))</a>
     <a class="Keyword" id="1020">with</a> <a class="Keyword" id="1025">record</a> <a class="Symbol" id="1032">{</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#14882" id="1034">⟦T⟧</a> <a class="Symbol" id="1038">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1040" id="1040">⟦T⟧</a> <a class="Symbol" id="1044">;</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#14896" id="1046">⟦t⟧</a> <a class="Symbol" id="1050">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1052" id="1052">⟦t⟧</a> <a class="Symbol" id="1056">;</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#14910" id="1058">↘⟦T⟧</a> <a class="Symbol" id="1063">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1065" id="1065">↘⟦T⟧</a> <a class="Symbol" id="1070">;</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#14936" id="1072">↘⟦t⟧</a> <a class="Symbol" id="1077">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1079" id="1079">↘⟦t⟧</a> <a class="Symbol" id="1084">;</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#14962" id="1086">T∈𝕌</a> <a class="Symbol" id="1090">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1092" id="1092">T∈𝕌</a> <a class="Symbol" id="1096">;</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#14985" id="1098">t∼⟦t⟧</a> <a class="Symbol" id="1104">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1106" id="1106">t∼⟦t⟧</a> <a class="Symbol" id="1112">}</a> ← <a class="Bound" href="NonCumulative.Soundness.html#913" id="1116">krip</a> <a class="Symbol" id="1121">(</a><a class="Function" href="NonCumulative.Soundness.Properties.Substitutions.html#7911" id="1122">InitEnvs⇒s®I</a> <a class="Bound" href="NonCumulative.Soundness.html#901" id="1135">⊩Γ</a> <a class="Bound" href="NonCumulative.Soundness.html#960" id="1138">ρinit</a><a class="Symbol" id="1143">)</a>
        <a class="Keyword" id="1153">with</a> <a class="Keyword" id="1158">record</a> <a class="Symbol" id="1165">{</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#11240" id="1167">a∈⊤</a> <a class="Symbol" id="1171">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1173" id="1173">a∈⊤</a> <a class="Symbol" id="1177">;</a> <a class="Field" href="NonCumulative.Soundness.LogRel.html#11275" id="1179">krip</a> <a class="Symbol" id="1184">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1186" id="1186">krip</a> <a class="Symbol" id="1191">}</a> ← <a class="Function" href="NonCumulative.Soundness.Realizability.html#26127" id="1195">®El⇒®↑El</a> <a class="Bound" href="NonCumulative.Soundness.html#1092" id="1204">T∈𝕌</a> <a class="Bound" href="NonCumulative.Soundness.html#1106" id="1208">t∼⟦t⟧</a>
           <a class="Keyword" id="1225">with</a> <a class="Bound" href="NonCumulative.Soundness.html#1230" id="1230">w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1232">,</a> <a class="Bound" href="NonCumulative.Soundness.html#1234" id="1234">↘w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1237">,</a> <a class="Symbol" id="1239">_</a> ← <a class="Bound" href="NonCumulative.Soundness.html#1173" id="1243">a∈⊤</a> <a class="Symbol" id="1247">(</a><a class="Field" href="LibNonEmpty.html#709" id="1248">len</a> <a class="Bound" href="NonCumulative.Soundness.html#862" id="1252">Γ</a><a class="Symbol" id="1253">)</a>
              <a class="Symbol" id="1269">|</a> <a class="Bound" href="NonCumulative.Soundness.html#1271" id="1271">eq</a> ← <a class="Bound" href="NonCumulative.Soundness.html#1186" id="1276">krip</a> <a class="Symbol" id="1281">(</a><a class="Function" href="NonCumulative.Soundness.Weakening.html#2612" id="1282">⊢wI</a> <a class="Symbol" id="1286">(</a><a class="Function" href="NonCumulative.Soundness.LogRel.html#14664" id="1287">⊩⇒⊢</a> <a class="Bound" href="NonCumulative.Soundness.html#901" id="1291">⊩Γ</a><a class="Symbol" id="1293">))</a> <a class="Symbol" id="1296">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1230" id="1298">w</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1300">,</a> <a class="Function" href="NonCumulative.Soundness.html#1335" id="1302">nbe</a> <a class="InductiveConstructor Operator" href="Agda.Builtin.Sigma.html#235" id="1306">,</a> <a class="Function" href="NonCumulative.Statics.Ascribed.Properties.html#2598" id="1308">[I]-≈ˡ</a> <a class="Symbol" id="1315">(</a><a class="Function" href="NonCumulative.Statics.Ascribed.Properties.html#2598" id="1316">[I]-≈ˡ</a> <a class="Bound" href="NonCumulative.Soundness.html#1271" id="1323">eq</a><a class="Symbol" id="1325">)</a>
  <a class="Keyword" id="1329">where</a> <a class="Function" href="NonCumulative.Soundness.html#1335" id="1335">nbe</a> <a class="Symbol" id="1339">:</a> <a class="Record" href="NonCumulative.Semantics.Readback.html#6354" id="1341">NbE</a> <a class="Bound" href="NonCumulative.Soundness.html#862" id="1345">Γ</a> <a class="Bound" href="NonCumulative.Soundness.html#866" id="1347">t</a> <a class="Bound" href="NonCumulative.Soundness.html#874" id="1349">i</a> <a class="Bound" href="NonCumulative.Soundness.html#870" id="1351">T</a> <a class="Bound" href="NonCumulative.Soundness.html#1230" id="1353">w</a>
        <a class="Function" href="NonCumulative.Soundness.html#1335" id="1363">nbe</a> <a class="Symbol" id="1367">=</a> <a class="Keyword" id="1369">record</a>
          <a class="Symbol" id="1386">{</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#6392" id="1388">envs</a> <a class="Symbol" id="1393">=</a> <a class="Bound" href="NonCumulative.Soundness.html#952" id="1395">ρ</a>
          <a class="Symbol" id="1407">;</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#6407" id="1409">init</a> <a class="Symbol" id="1414">=</a> <a class="Bound" href="NonCumulative.Soundness.html#960" id="1416">ρinit</a>
          <a class="Symbol" id="1432">;</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#6434" id="1434">nbe</a>  <a class="Symbol" id="1439">=</a> <a class="Keyword" id="1441">record</a>
            <a class="Symbol" id="1460">{</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#5807" id="1462">⟦t⟧</a>  <a class="Symbol" id="1467">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1052" id="1469">⟦t⟧</a>
            <a class="Symbol" id="1485">;</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#5820" id="1487">⟦T⟧</a>  <a class="Symbol" id="1492">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1040" id="1494">⟦T⟧</a>
            <a class="Symbol" id="1510">;</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#5833" id="1512">↘⟦t⟧</a> <a class="Symbol" id="1517">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1079" id="1519">↘⟦t⟧</a>
            <a class="Symbol" id="1536">;</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#5858" id="1538">↘⟦T⟧</a> <a class="Symbol" id="1543">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1065" id="1545">↘⟦T⟧</a>
            <a class="Symbol" id="1562">;</a> <a class="Field" href="NonCumulative.Semantics.Readback.html#5883" id="1564">↓⟦t⟧</a> <a class="Symbol" id="1569">=</a> <a class="Bound" href="NonCumulative.Soundness.html#1234" id="1571">↘w</a>
            <a class="Symbol" id="1586">}</a>
          <a class="Symbol" id="1598">}</a></pre></div></body></html>